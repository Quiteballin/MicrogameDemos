pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);this._add.length&&(this._tweens=this._tweens.concat(this._add),this._add.length=0)}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},_parseProperties=function(t){var i;return t instanceof pc.Vec2?i={x:t.x,y:t.y}:t instanceof pc.Vec3?i={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?i={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(i={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(i.a=t.a)):i=t,i};Tween.prototype={to:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this},from:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var t,i,e,n;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(i,e,n))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._toQuat.setFromEulerAngles(i,e,n))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,n,s=0===this.duration?1:this.time/this.duration,r=this.easing(s);for(var h in this._properties)this._properties.hasOwnProperty(h)&&(e=this._sv[h],n=this._ev[h],this.target[h]=e+(n-e)*r);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties){var e=this._sv[i];this._sv[i]=this._ev[i],this._ev[i]=e}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},BounceIn=function(t){return 1-BounceOut(1-t)};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,n=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=n*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*.5+1)}}}()),function(){pc.Application.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",(function(t){this._tweenManager.update(t)}))},pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.once("destroy",e.stop,e),i&&i.element&&(e.element=i.element),e};var t=pc.Application.getApplication();t&&t.addTweenManager()}();var ShootBallButton=pc.createScript("shootBallButton");ShootBallButton.prototype.initialize=function(){this.entity.button.active=!0,this.entity.button.on("touchstart",(function(){this.app.fire("shootButtonPress")}),this),this.entity.button.on("touchend",(function(){this.app.fire("shootButtonRelease")}),this),this.app.on("disableShootingBtn",(function(){this.entity.button.active=!1}),this),this.app.on("enableShootingBtn",(function(){this.entity.button.active=!0}),this)};var GameManager=pc.createScript("gameManager");GameManager.attributes.add("madeShotThreshold",{type:"number",description:"defaults to five which means, at 95% and above, a shot is made",default:5}),GameManager.attributes.add("sliderTimeInput",{type:"number",description:"amount of time slider takes going one way. will change based on position on the court",default:.6}),GameManager.attributes.add("streakThreshold",{type:"number",description:"how many shots need to be made in a row to get a streak",default:3}),GameManager.prototype.initialize=function(){let t=this;this.activeRackIndex=0,this.ballsLeftOnRack=5,this.ballsLeft=25,this.inGameScore=0,this.normalBallsMade=0,this.moneyBallsMade=0,this.timeLeft=0,this.finalScore=0,this.hiscore=0,this.streak=0,this.cornerThreshold=this.madeShotThreshold-2,this.wingThreshold=this.madeShotThreshold,this.keyThreshold=this.madeShotThreshold+3,this.currentShotThreshold=this.cornerThreshold,this.currentSliderTime=this.sliderTimeInput,this.gameInProgress=!1,this.readyToShoot=!1,this.hasShot=!1,this.isInAir=!1,this.app.on("startButtonRelease",(function(){this.app.fire("startCountdown"),this.app.fire("disableStartScreen")}),this),this.app.on("instructionsButtonRelease",(function(){this.app.fire("disableStartScreen"),this.app.fire("enableInstructionsScreen")}),this),this.app.on("instructionsExitButtonRelease",(function(){this.app.fire("enableStartScreen"),this.app.fire("disableInstructionsScreen")}),this),this.app.on("playAgainButtonRelease",(function(){this.app.fire("disableEndScreen"),this.app.fire("gameReset")}),this),this.app.on("gameStart",(function(){this.gameInProgress=!0,this.app.fire("startShotClock"),this.app.fire("playAnimation","landedAfterShooting"),this.app.fire("enableShootingBtn"),this.app.fire("enableInGameUI")}),this),this.app.on("gameEnd",(function(){0===this.ballsLeft&&this.app.fire("playAnimation","lastShotPose"),this.app.fire("stopShotClock"),this.app.fire("disableShootingBtn"),this.finalScore=this.inGameScore+this.timeLeft,this.finalScore>this.hiscore&&(this.hiscore=this.finalScore),this.app.tween({}).to({},1.75,pc.Linear).on("complete",(function(){t.app.fire("scoreCardUpdate",t.finalScore,t.hiscore,t.normalBallsMade,t.moneyBallsMade,t.timeLeft),t.app.fire("disableInGameUI"),t.app.fire("enableEndScreen",t.hiscore)})).start()}),this),this.app.on("gameReset",(function(){this.activeRackIndex=0,this.ballsLeftOnRack=5,this.ballsLeft=25,this.inGameScore=0,this.streak=0,this.normalBallsMade=0,this.moneyBallsMade=0,this.timeLeft=0,this.finalScore=0,this.readyToShoot=!1,this.hasShot=!1,this.isInAir=!1,this.currentShotThreshold=this.cornerThreshold,this.app.fire("resetShotClock"),this.app.fire("resetCountdown"),this.app.fire("resetPlayerAnimation"),this.app.fire("resetCamera"),this.app.fire("deleteActiveBalls"),this.app.fire("resetBallRacks"),this.app.fire("stopParticle","hoopStreak"),this.app.fire("resetInGameUI"),this.app.fire("startCountdown")}),this),this.app.on("countdownEnd",(function(){this.app.fire("gameStart")}),this),this.app.on("shotClockReachedZero",(function(){this.timeLeft=0,this.app.fire("gameEnd")}),this),this.app.on("timeLeftUpdate",(function(t){this.timeLeft=t}),this),this.app.on("sliderEndAlphaSend",(function(t){this.streak>=this.streakThreshold&&this.app.fire("startStreakTrail");let e=!1;Math.abs(t-100)<=this.currentShotThreshold?(e=!0,1===this.ballsLeftOnRack?(this.inGameScore+=2,this.moneyBallsMade+=1):(this.inGameScore+=1,this.normalBallsMade+=1),this.streak+=1):this.streak=0,this.app.fire("ballReleased",e,this.activeRackIndex),this.ballsLeftOnRack-=1}),this),this.app.on("shootButtonPress",(function(){t.readyToShoot&&(t.isInAir=!0,t.readyToShoot=!1,t.app.fire("startSlider",this.currentSliderTime),t.app.fire("playAnimation","startJump",this.currentSliderTime),t.app.fire("cameraShotAnimation",this.currentSliderTime))}),this),this.app.on("shootButtonRelease",(function(){t.hasShot||t.isInAir&&(t.hasShot=!0,t.app.fire("playAnimation","shotRelease"),t.app.fire("stopSlider"),this.ballsLeft-=1)}),this),this.app.on("readyToShoot",(function(){t.readyToShoot=!0,t.hasShot=!1}),this),this.app.on("jumpEnded",(function(){t.isInAir=!1,this.app.fire("sliderBackToOrigin"),this.app.fire("playParticle","landingDust"),this.ballsLeftOnRack<1&&0!=this.ballsLeft?t.app.fire("startMoveToNextRack",t.activeRackIndex+1):t.hasShot?0===this.ballsLeft?this.app.fire("gameEnd"):t.app.fire("playAnimation","landedAfterShooting"):(t.app.fire("readyToShoot"),t.app.fire("playAnimation","landedWithoutShooting"))}),this),this.app.on("spawnBallToShoot",(function(t,e,i){let a=this.app.assets.get("62503232");i&&(a=this.app.assets.get("63003220"));let s=a.resource.instantiate();this.app.root.addChild(s),s.children[0].setLocalPosition(0,t.y,0),s.children[0].children[0].setLocalPosition(t.x,0,t.z),s.children[0].children[0].children[0].setLocalEulerAngles(e)}),this),this.app.on("ballReachedHoop",(function(t){this.streak>=this.streakThreshold?this.app.fire("playParticle","hoopStreak"):this.app.fire("stopParticle","hoopStreak"),t&&(this.streak>=this.streakThreshold?(this.app.fire("cameraShake"),this.app.fire("playGlowAnimation",!0)):this.app.fire("playGlowAnimation",!1),this.app.fire("playParticle","shotSplash"),this.app.fire("playNetAnimation","shotMade")),this.app.fire("updateScoreUI",this.inGameScore,t,this.ballsLeftOnRack)}),this),this.app.on("ballStoppedMoving",(function(e){t.app.fire("destroySpecificBall",e)}),this),this.app.on("arrivedAtNextRack",(function(){t.activeRackIndex+=1,this.ballsLeftOnRack=5,t.app.fire("updateActiveRackIndex",t.activeRackIndex),0!==t.activeRackIndex&&4!==t.activeRackIndex||(t.currentShotThreshold=t.cornerThreshold),1!==t.activeRackIndex&&3!==t.activeRackIndex||(t.currentShotThreshold=t.wingThreshold),2===t.activeRackIndex&&(t.currentShotThreshold=t.keyThreshold)}),this)};var PlayerAnimationManager=pc.createScript("playerAnimationManager");PlayerAnimationManager.prototype.initialize=function(){let t=this;this.originalRotation=this.entity.getEulerAngles(),this.yMovementTween=void 0,this.groundMovementTween=void 0,this.rotationalTween=void 0,this.groundHeight=this.entity.getLocalPosition().y,this.jumpHeight=2.75,this.shotPositions=[this.app.root.findByName("shotPositions").children[0].getLocalPosition(),this.app.root.findByName("shotPositions").children[1].getLocalPosition(),this.app.root.findByName("shotPositions").children[2].getLocalPosition(),this.app.root.findByName("shotPositions").children[3].getLocalPosition(),this.app.root.findByName("shotPositions").children[4].getLocalPosition()],this.entity.anim.on("readyToShoot",(function(){this.app.fire("readyToShoot")}),this),this.entity.anim.on("ballPickup",(function(){this.app.fire("ballPickup")}),this),this.app.on("resetPlayerAnimation",(function(){t.entity.setPosition(t.shotPositions[0]),t.entity.setEulerAngles(t.originalRotation),this.app.fire("playAnimation","enterIdle")}),this),this.app.on("startMoveToNextRack",(function(i){let o=t.app.root.findByName("shotMadeRimLocation").getPosition();o.y=0,this.app.fire("playAnimation","startRun"),t.rotationalTween=t.entity.tween(t.entity.getLocalEulerAngles()).rotate(t.getLookAtDestinationAngle(t.shotPositions[i]),.25,pc.QuadraticOut).start(),t.groundMovementTween=t.entity.tween(t.entity.getLocalPosition()).to(t.shotPositions[i],1.25,pc.QuadraticIn).on("complete",(function(){t.app.fire("playAnimation","stopRun"),t.rotationalTween=t.entity.tween(t.entity.getLocalEulerAngles()).rotate(t.getLookAtDestinationAngle(o),.35,pc.QuadraticInOut).on("complete",(function(){t.app.fire("arrivedAtNextRack")})).start()})).start()}),this),this.app.on("playAnimation",(function(i,o){"startJump"===i&&(this.yMovementTween=t.entity.tween(t.entity.getLocalPosition()).to(new pc.Vec3(t.entity.getLocalPosition().x,this.jumpHeight,t.entity.getLocalPosition().z),o,pc.CubicOut).on("complete",(function(){t.yMovementTween=t.entity.tween(t.entity.getLocalPosition()).to(new pc.Vec3(t.entity.getLocalPosition().x,this.groundHeight,t.entity.getLocalPosition().z),o,pc.CubicIn).on("complete",(function(){this.app.fire("jumpEnded")}),this).start()}),this).start()),this.entity.anim.setTrigger(i)}),this)},PlayerAnimationManager.prototype.getLookAtDestinationAngle=function(t){let i=new pc.Mat4,o=new pc.Quat;i.setLookAt(this.entity.getPosition(),t,this.entity.up),o.setFromMat4(i);let e=o.getEulerAngles();return e.y+=180,e};var RackManager=pc.createScript("rackManager");RackManager.prototype.initialize=function(){let t=this;this.ballArray=[this.entity.children[0],this.entity.children[1],this.entity.children[2],this.entity.children[3],this.entity.children[4]],this.initialPositionArray=[this.entity.children[0].getLocalPosition().clone(),this.entity.children[1].getLocalPosition().clone(),this.entity.children[2].getLocalPosition().clone(),this.entity.children[3].getLocalPosition().clone(),this.entity.children[4].getLocalPosition().clone()],this.initalRotation=this.entity.children[0].getLocalEulerAngles().clone(),this.pickUpBallLocation=this.ballArray[0].getLocalPosition(),this.rollTime=.6,this.activeRackIndex=0,this.ballIndex=0,this.app.on("resetBallRacks",(function(){for(let t=0;t<this.ballArray.length;t++)this.ballArray[t].setLocalPosition(this.initialPositionArray[t]),this.ballArray[t].setLocalEulerAngles(this.initalRotation),this.ballArray[t].enabled=!0;this.ballIndex=0,this.activeRackIndex=0}),this),this.app.on("ballPickup",(function(){if(t.entity.tags.has("rack"+t.activeRackIndex)){let i=t.ballArray[t.ballIndex],l=!1;4===this.ballIndex&&(l=!0),this.app.fire("spawnBallToShoot",i.getPosition(),i.getEulerAngles(),l),i.enabled=!1,this.ballIndex+=1,t.rollBalls()}}),this),this.app.on("updateActiveRackIndex",(function(i){t.activeRackIndex=i}),this)},RackManager.prototype.rollBalls=function(){for(let t=0;t<this.ballArray.length;t++){t>0?this.ballArray[t].tween(this.ballArray[t].getLocalPosition()).to(this.ballArray[t-1].getLocalPosition(),this.rollTime,pc.QuadraticIn).start():this.ballArray[t].tween(this.ballArray[t].getLocalPosition()).to(this.pickUpBallLocation,this.rollTime,pc.QuadraticIn).start();let i=this.ballArray[t].getLocalEulerAngles().clone();i.y-=45,this.ballArray[t].tween(this.ballArray[t].getLocalEulerAngles()).rotate(i,this.rollTime,pc.QuadraticIn).start()}};var BallForShooting=pc.createScript("ballForShooting");function getRandomIntInclusive(t,i){return t=Math.ceil(t),i=Math.floor(i),Math.floor(Math.random()*(i-t+1)+t)}BallForShooting.prototype.initialize=function(){let t=this;this.beenShot=!1,this.yEntity=this.entity.children[0],this.xzEntity=this.entity.children[0].children[0],this.rotEntity=this.entity.children[0].children[0].children[0];let i=this.app.root.findByName("holdBallParent").getPosition().clone();i.x=0,i.z=0;let o=this.app.root.findByName("holdBallParent").getPosition().clone();o.y=0,this.yEntity.setPosition(i),this.xzEntity.setPosition(o),this.shotHeight=10,this.horizontalTween=void 0,this.verticalTween=void 0,this.shotMadeEntity=this.app.root.findByName("shotMadeRimLocation"),this.shotMissLocationEntities=[this.app.root.findByName("shotMissRimLocation1"),this.app.root.findByName("shotMissRimLocation2"),this.app.root.findByName("shotMissRimLocation3"),this.app.root.findByName("shotMissRimLocation4"),this.app.root.findByName("shotMissRimLocation5")],this.app.once("ballReleased",(function(t,i){this.beenShot=!0,t?this.shotMade(i):this.shotNotMade()}),this);var onDestroySpecificBall=function(i){t.entity===i&&t.entity.destroy()},onDeleteActiveBalls=function(){t.entity.destroy()};this.app.on("destroySpecificBall",onDestroySpecificBall,this),this.app.on("deleteActiveBalls",onDeleteActiveBalls,this),this.on("destroy",(function(){this.app.off("destroySpecificBall",onDestroySpecificBall,this),this.app.off("deleteActiveBalls",onDeleteActiveBalls,this)}),this)},BallForShooting.prototype.update=function(t){if(this.beenShot)this.rotEntity.rotateLocal(0,0,500*t);else{let t=this.app.root.findByName("holdBallParent").getPosition().clone();t.x=0,t.z=0;let i=this.app.root.findByName("holdBallParent").getPosition().clone();i.y=0,this.yEntity.setLocalPosition(t),this.xzEntity.setLocalPosition(i)}},BallForShooting.prototype.shotMade=function(t){let i=this,o=this.shotMadeEntity.getPosition().clone();o.y=0;let e=this.shotMadeEntity.getPosition().clone();e.x=0,e.z=0,this.horizontalTween=this.xzEntity.tween(this.xzEntity.getLocalPosition()).to(o,.9,pc.Linear).on("complete",(function(){i.app.fire("ballReachedHoop",!0),o=i.shotMadeEntity.children[t].getPosition().clone(),o.y=0,i.horizontalTween=i.xzEntity.tween(i.xzEntity.getLocalPosition()).to(o,2,pc.QuadraticOut).on("complete",(function(){i.app.fire("ballStoppedMoving",i.entity)})).start()})).start(),this.verticalTween=this.yEntity.tween(this.yEntity.getLocalPosition()).to(new pc.Vec3(0,this.shotHeight,0),.55,pc.QuadraticOut).on("complete",(function(){i.verticalTween=i.yEntity.tween(i.yEntity.getLocalPosition()).to(e,.35,pc.QuadraticIn).on("complete",(function(){i.verticalTween=i.yEntity.tween(i.yEntity.getLocalPosition()).to(new pc.Vec3(0,.15,0),.4,pc.Linear).on("complete",(function(){i.verticalTween=i.yEntity.tween(i.yEntity.getLocalPosition()).to(new pc.Vec3(0,1,0),.15,pc.QuadraticOut).on("complete",(function(){i.verticalTween=i.yEntity.tween(i.yEntity.getLocalPosition()).to(new pc.Vec3(0,.3,0),.5,pc.BounceOut).start()})).start()})).start()})).start()})).start()},BallForShooting.prototype.shotNotMade=function(){let t=this,i=getRandomIntInclusive(0,4),o=this.shotMissLocationEntities[i].getPosition().clone();o.y=0;let e=this.shotMissLocationEntities[i].getPosition().clone();e.x=0,e.z=0,this.horizontalTween=this.xzEntity.tween(this.xzEntity.getLocalPosition()).to(o,.9,pc.Linear).on("complete",(function(){t.app.fire("ballReachedHoop",!1),o=t.shotMissLocationEntities[i].children[0].getPosition().clone(),o.y=0,t.horizontalTween=t.xzEntity.tween(t.xzEntity.getLocalPosition()).to(o,1.5,pc.QuadraticOut).on("complete",(function(){t.app.fire("ballStoppedMoving",t.entity)})).start()})).start(),this.verticalTween=this.yEntity.tween(this.yEntity.getLocalPosition()).to(new pc.Vec3(0,this.shotHeight,0),.55,pc.QuadraticOut).on("complete",(function(){t.verticalTween=t.yEntity.tween(t.yEntity.getLocalPosition()).to(e,.35,pc.QuadraticIn).on("complete",(function(){t.verticalTween=t.yEntity.tween(t.yEntity.getLocalPosition()).to(new pc.Vec3(0,.15,0),1.25,pc.BounceOut).start()})).start()})).start()};var CameraManager=pc.createScript("cameraManager");CameraManager.attributes.add("positionOne",{type:"vec3",description:"position of camera on first shot",default:[0,0,0]}),CameraManager.attributes.add("rotationOne",{type:"vec3",description:"rotation of camera on first shot",default:[0,0,0]}),CameraManager.attributes.add("positionTwo",{type:"vec3",description:"rotation of camera on second shot",default:[0,0,0]}),CameraManager.attributes.add("rotationTwo",{type:"vec3",description:"rotation of camera on second shot",default:[0,0,0]}),CameraManager.attributes.add("positionThree",{type:"vec3",description:"rotation of camera on third shot",default:[0,0,0]}),CameraManager.attributes.add("rotationThree",{type:"vec3",description:"rotation of camera on third shot",default:[0,0,0]}),CameraManager.attributes.add("positionFour",{type:"vec3",description:"rotation of camera on fourth shot",default:[0,0,0]}),CameraManager.attributes.add("rotationFour",{type:"vec3",description:"rotation of camera on fourth shot",default:[0,0,0]}),CameraManager.attributes.add("positionFive",{type:"vec3",description:"rotation of camera on fifth shot",default:[0,0,0]}),CameraManager.attributes.add("rotationFive",{type:"vec3",description:"rotation of camera on fifth shot",default:[0,0,0]}),CameraManager.prototype.initialize=function(){let t=this;this.transitionSpeed=1.75,this.startPos=new pc.Vec3(14.145,4.291,3.832),this.startRot=new pc.Vec3(-172.73,58.19,179.25),this.movementTween=void 0,this.rotationalTween=void 0,this.cameraPositions=[this.positionOne,this.positionTwo,this.positionThree,this.positionFour,this.positionFive],this.cameraRotations=[this.rotationOne,this.rotationTwo,this.rotationThree,this.rotationFour,this.rotationFive],this.entity.setPosition(this.startPos),this.entity.setEulerAngles(this.startRot),this.cameraEntity=this.entity.children[0].children[0],this.fovData={fov:this.cameraEntity.camera.fov},this.app.on("startCountdown",(function(){t.movementTween=t.entity.tween(t.entity.getLocalPosition()).to(t.cameraPositions[0],2.5,pc.CubicInOut).start(),t.rotationalTween=t.entity.tween(t.entity.getLocalEulerAngles()).rotate(t.cameraRotations[0],2.5,pc.QuinticInOut).delay(0).start()}),this),this.app.on("startMoveToNextRack",(function(a){t.movementTween=t.entity.tween(t.entity.getLocalPosition()).to(t.cameraPositions[a],this.transitionSpeed,pc.QuadraticInOut).start(),t.rotationalTween=t.entity.tween(t.entity.getLocalEulerAngles()).rotate(t.cameraRotations[a],this.transitionSpeed,pc.QuadraticInOut).start()}),this),this.app.on("resetCamera",(function(){this.entity.setPosition(this.cameraPositions[0]),this.entity.setEulerAngles(this.cameraRotations[0])}),this),this.app.on("cameraShotAnimation",(function(a){this.fovData.fov=this.cameraEntity.camera.fov,this.app.tween(t.fovData).to({fov:t.fovData.fov+.3},a,pc.QuadraticInOut).yoyo(!0).loop(!1).on("update",(()=>{t.cameraEntity.camera.fov=t.fovData.fov})).repeat(2).start(),t.cameraEntity.tween(t.cameraEntity.getLocalPosition()).to(new pc.Vec3(0,.175,0),a,pc.QuadraticInOut).yoyo(!0).loop(!1).repeat(2).delay(.1).start()}),this)};var ShotClockManager=pc.createScript("shotClockManager");ShotClockManager.attributes.add("initialTime",{type:"number",description:"needs an integer. shot clock time for a game.",default:60}),ShotClockManager.prototype.initialize=function(){this.timer1=this.entity.children[0].children[0],this.timer2=this.entity.children[0].children[1],this.timer3=this.entity.children[0].children[2],this.cageEntity=this.entity.children[1].children[0].children[0],this.endBillboard=this.entity.children[1].children[1],this.endBillboardPlane=this.endBillboard.children[0].render.meshInstances[0],this.endBillboardIntensity=this.endBillboardPlane.material.opacity,this.endBillboardPlane.material.opacity=0,this.isEndBillboardVisible=!0,this.endBillboardPlane.setParameter("material_diffuse",[1,0,0]),this.endBillboardPlane.setParameter("material_emissive",[1,0,0]),this.shotMadeBillboard=this.entity.children[1].children[2],this.shotMadeBillboardPlane=this.shotMadeBillboard.children[0].render.meshInstances[0],this.shotMadeBillboardPlane.material=this.endBillboardPlane.material.clone(),this.shotMadeBillboardIntensity=this.shotMadeBillboardPlane.material.opacity,this.shotMadeBillboardPlane.material.opacity=0,this.isShotMadeBillboardVisible=!0,this.shotMadeBillboardPlane.setParameter("material_diffuse",[0,0,1]),this.shotMadeBillboardPlane.setParameter("material_emissive",[0,0,1]),this.cameraEntity=this.app.root.findByName("Camera"),this.timer=this.initialTime,this.setClockText(this.timer),this.isTimerRunning=!1,this.app.on("startShotClock",(function(){this.isTimerRunning=!0}),this),this.app.on("stopShotClock",(function(){this.isTimerRunning=!1,this.app.fire("timeLeftUpdate",Math.floor(this.timer)),this.endMaterialAnimation()}),this),this.app.on("resetShotClock",(function(){this.timer=this.initialTime,this.setClockText(this.timer)}),this),this.app.on("playGlowAnimation",(function(t){this.shotMadeAnim(t)}),this)},ShotClockManager.prototype.update=function(t){this.isTimerRunning&&(this.timer-=t,Math.floor(this.timer)<=0&&(this.app.fire("stopShotClock"),this.app.fire("shotClockReachedZero")),this.setClockText(this.timer)),this.isEndBillboardVisible&&this.endBillboard.setRotation(this.cameraEntity.getRotation()),this.isShotMadeBillboardVisible&&this.shotMadeBillboard.setRotation(this.cameraEntity.getRotation())},ShotClockManager.prototype.endMaterialAnimation=function(){let t=this;this.cageEntity.render.meshInstances[0].setParameter("material_emissive",[1,0,0]),this.endBillboardPlane.material.opacity=t.endBillboardIntensity,this.endBillboardPlane.material.update(),this.isEndBillboardVisible=!0;let i={value:1};this.app.tween({}).to({},1.5,pc.Linear).on("complete",(function(){t.entity.tween(i).to({value:0},.1,pc.QuadraticOut).on("update",(function(){t.cageEntity.render.meshInstances[0].setParameter("material_emissive",[i.value,0,0]),t.endBillboardPlane.material.opacity=i.value*t.endBillboardIntensity,t.endBillboardPlane.material.update()})).on("complete",(function(){t.isEndBillboardVisible=!1})).start()})).start()},ShotClockManager.prototype.shotMadeAnim=function(t){let i=this,e={value:0},a=.2;t&&(a=.6),this.isShotMadeBillboardVisible=!0,i.entity.tween(e).to({value:1},.1,pc.QuadraticIn).on("update",(function(){i.shotMadeBillboardPlane.material.opacity=e.value*a,i.shotMadeBillboardPlane.material.update()})).on("complete",(function(){i.entity.tween(e).to({value:0},.1,pc.QuadraticOut).delay(0).on("update",(function(){i.shotMadeBillboardPlane.material.opacity=e.value*a,i.shotMadeBillboardPlane.material.update()})).on("complete",(function(){i.isShotMadeBillboardVisible=!1})).start()})).start()},ShotClockManager.prototype.setClockText=function(t){let i=Math.floor(t).toString();Math.floor(this.timer)<10&&(i="0"+i),this.timer1.children[0].element.text=i.charAt(0),this.timer1.children[1].element.text=i.charAt(1),this.timer2.children[0].element.text=i.charAt(0),this.timer2.children[1].element.text=i.charAt(1),this.timer3.children[0].element.text=i.charAt(0),this.timer3.children[1].element.text=i.charAt(1)};var NetAnimationManager=pc.createScript("netAnimationManager");NetAnimationManager.prototype.initialize=function(){this.app.on("playNetAnimation",(function(i){this.entity.anim.setTrigger(i)}),this)};var ScoreManager=pc.createScript("scoreManager");ScoreManager.attributes.add("initialColor",{type:"rgba",description:"initial color of shot circle",default:[.69,.749,.764,1]}),ScoreManager.attributes.add("shotMadeColor",{type:"rgba",description:"made color of shot circle",default:[.749,.329,.69,1]}),ScoreManager.attributes.add("shotMissColor",{type:"rgba",description:"missed color of shot circle",default:[.172,.713,.466,1]}),ScoreManager.prototype.initialize=function(){let t=this;this.entity.enabled=!1,this.scoreText="0",this.scoreTextEntity=this.entity.children[0].children[0],this.opacityComponents=this.entity.findComponents("element"),this.opacityComponents.forEach((function(t){t.opacity=0})),this.ballUIArray=[this.entity.children[0].children[5],this.entity.children[0].children[4],this.entity.children[0].children[3],this.entity.children[0].children[2],this.entity.children[0].children[1]],this.app.on("updateScoreUI",(function(e,i,n){t.scoreTextEntity.element.text=e.toString(),this.activateBallCircle(i,n)}),this),this.app.on("resetInGameUI",(function(){t.scoreTextEntity.element.text="0",this.resetBallCircles()}),this),this.app.on("arrivedAtNextRack",(function(){this.resetBallCircles()}),this),this.app.on("enableInGameUI",(function(){this.entity.enabled=!0,this.tweenOpacity("on")}),this),this.app.on("disableInGameUI",(function(){this.tweenOpacity("off")}),this)},ScoreManager.prototype.tweenOpacity=function(t){let e=this,i={value:this.scoreTextEntity.element.opacity},n=1;"off"===t&&(n=0),this.opacityTween=this.entity.tween(i).to({value:n},.3,pc.QuadraticInOut).delay(0).on("update",(function(){e.opacityComponents.forEach((function(t){t.opacity=i.value}))})).on("complete",(function(){"off"===t&&(e.entity.enabled=!1)})).start()},ScoreManager.prototype.activateBallCircle=function(t,e){let i=this.ballUIArray[e].element,n=i.color.clone(),o=this.initialColor;o=t?this.shotMadeColor:this.shotMissColor,this.app.tween(n).to(o,.2,pc.QuadraticInOut).on("update",(function(){i.color=n})).start()},ScoreManager.prototype.resetBallCircles=function(){let t=this;for(let e=0;e<t.ballUIArray.length;e++){let i=t.ballUIArray[e].element,n=i.color.clone(),o=this.initialColor;this.app.tween(n).to(o,.2,pc.QuadraticInOut).on("update",(function(){i.color=n})).start()}};var StartButton=pc.createScript("startButton");StartButton.prototype.initialize=function(){let t=this;this.entity.button.active=!0;let e=.03;this.targetScale=this.entity.parent.getLocalScale().clone(),this.targetScale.x+=e,this.targetScale.y+=e,this.targetScale.z+=e,this.buttonOpacityTween=this.entity.parent.tween(this.entity.parent.getLocalScale()).to(this.targetScale,1.1,pc.QuadraticInOut).yoyo(!0).loop(!0).start(),this.entity.button.on("touchend",(function(){t.entity.button.active=!1,this.app.fire("startButtonRelease")}),this),this.app.on("enableStartScreenButtons",(function(){t.entity.button.active=!0,this.buttonOpacityTween.start()}),this),this.app.on("disableStartScreenButtons",(function(){this.buttonOpacityTween.stop(),t.entity.button.active=!1}),this)};var CountdownManager=pc.createScript("countdownManager");CountdownManager.prototype.initialize=function(){let t=this;this.one=this.entity.children[0],this.two=this.entity.children[1],this.three=this.entity.children[2],this.go=this.entity.children[3],this.opacityObject={value:0},this.opacityTween=void 0,this.app.on("startCountdown",(function(){this.three.enabled=!0,this.three.element.opacity=0,this.opacityTween=this.entity.tween(this.opacityObject).to({value:1},.3,pc.QuadraticInOut).on("update",(function(){t.three.element.opacity=t.opacityObject.value})).on("complete",(function(){this.app.tween({}).to({},.9,pc.Linear).on("complete",(function(){this.three.enabled=!1,this.two.enabled=!0,this.app.tween({}).to({},1.2,pc.Linear).on("complete",(function(){this.two.enabled=!1,this.one.enabled=!0,this.app.tween({}).to({},1.2,pc.Linear).on("complete",(function(){this.one.enabled=!1,this.app.fire("countdownEnd"),this.go.enabled=!0,this.opacityTween=this.entity.tween(this.opacityObject).to({value:0},.3,pc.QuadraticInOut).delay(.5).on("update",(function(){t.go.element.opacity=t.opacityObject.value})).start()}),this).start()}),this).start()}),this).start()}),this).start()}),this),this.app.on("resetCountdown",(function(){for(let e=0;e<t.entity.children.length;e++)t.entity.children[e].element.opacity=1,t.entity.children[e].enabled=!1}))};var InstructionsBtn=pc.createScript("instructionsBtn");InstructionsBtn.prototype.initialize=function(){let t=this;this.entity.button.active=!0,this.entity.button.on("touchend",(function(){t.entity.button.active=!1,this.app.fire("instructionsButtonRelease")}),this),this.app.on("enableStartScreenButtons",(function(){t.entity.button.active=!0}),this),this.app.on("disableStartScreenButtons",(function(){t.entity.button.active=!1}),this)};var StartScreenManager=pc.createScript("startScreenManager");StartScreenManager.prototype.initialize=function(){let t=this;this.startButton=this.entity.children[0],this.opacityTween=void 0,this.opacityComponents=this.entity.findComponents("element"),this.opacityComponents.forEach((function(t){t.opacity=1})),this.app.on("disableStartScreen",(function(){this.app.fire("disableStartScreenButtons"),t.tweenOpacity("off")}),this),this.app.on("enableStartScreen",(function(){t.tweenOpacity("on")}),this)},StartScreenManager.prototype.tweenOpacity=function(t){let e=this,n={value:this.startButton.element.opacity},i=1;"off"===t?i=0:"on"===t&&this.entity.setPosition(0,0,0),this.opacityTween=this.entity.tween(n).to({value:i},.3,pc.QuadraticInOut).delay(0).on("update",(function(){e.opacityComponents.forEach((function(t){t.opacity=n.value}))})).on("complete",(function(){0===i&&e.entity.setPosition(-1e3,0,0),"on"===t&&e.app.fire("enableStartScreenButtons")})).start()};var Trail=pc.createScript("trail");Trail.attributes.add("color",{type:"rgb",title:"color"}),Trail.attributes.add("radius",{type:"number",title:"radius",default:.5}),Trail.attributes.add("lifetime",{type:"number",title:"lifetime",default:1.2}),Trail.attributes.add("trailfadeness",{type:"number",title:"trailfadeness",default:2,min:1,max:4}),Trail.attributes.add("opacityFactor",{type:"number",title:"opacityFactor",default:.8,min:.1,max:1}),Trail.v1=new pc.Vec3,Trail.q1=new pc.Quat,Trail.m1=new pc.Mat4,Trail.prototype.initialize=function(){let e=this;this.MAX_VERTICES=1800,this.VERTEX_SIZE=4,this.timer=0,this.node=null,this.vertices=[],this.vertexData=new Float32Array(this.MAX_VERTICES*this.VERTEX_SIZE),this.model=null,this.ballRoot=this.entity.parent.parent.parent,this.app.on("ballReleased",(function(){e.visible()}),this);var onDestroySpecificBall=function(t){e.ballRoot===t&&e.SetOff()},onDeleteActiveBalls=function(){e.SetOff()};this.app.on("destroySpecificBall",onDestroySpecificBall,this),this.app.on("deleteActiveBalls",onDeleteActiveBalls,this),this.on("destroy",(function(){this.app.off("destroySpecificBall",onDestroySpecificBall,this),this.app.off("deleteActiveBalls",onDeleteActiveBalls,this)}),this),this.app.once("startStreakTrail",(function(){e.changeColor(1,.176,0),a.setParameter("trail_lifetime",1.25*this.lifetime)}),this);var t={attributes:{poslist:pc.SEMANTIC_POSITION},vshader:["attribute vec4 poslist;","","uniform mat4 matrix_viewProjection;","uniform float trail_time;","","varying float vAge;","","void main(void)","{","   vAge = trail_time - poslist.w;","   gl_Position = matrix_viewProjection * vec4(poslist.xyz, 1.0);","}"].join("\n"),fshader:["precision mediump float;","","varying float vAge;","","uniform float trail_lifetime;","uniform bool visible;","uniform float rValue;","uniform float gValue;","uniform float bValue;","void main(void)","{","   vec4 color = vec4(0);","   if(visible) color = vec4( rValue, gValue, bValue, (1.0 - (vAge / trail_lifetime)) *"+this.opacityFactor+");","   gl_FragColor = color;","}"].join("\n")},i=new pc.Shader(this.app.graphicsDevice,t),a=this.material=new pc.scene.Material;a.shader=i,a.setParameter("trail_time",0),a.setParameter("trail_lifetime",this.lifetime),a.setParameter("visible",!1),a.setParameter("rValue","1"),a.setParameter("gValue","1"),a.setParameter("bValue","1"),a.cull=pc.CULLFACE_NONE,a.blendType=pc.BLEND_ADDITIVE,a.blendSrc=pc.BLENDMODE_SRC_ALPHA,a.blendDst=pc.BLENDMODE_ONE_MINUS_SRC_ALPHA,a.blendEquation=pc.BLENDEQUATION_ADD,a.depthWrite=!1;var r=new pc.VertexFormat(this.app.graphicsDevice,[{semantic:pc.SEMANTIC_POSITION,components:4,type:pc.TYPE_FLOAT32}]),s=new pc.VertexBuffer(this.app.graphicsDevice,r,this.MAX_VERTICES,pc.BUFFER_DYNAMIC),o=new pc.scene.Mesh;o.vertexBuffer=s,o.indexBuffer[0]=null,o.primitive[0].type=pc.PRIMITIVE_TRISTRIP,o.primitive[0].base=0,o.primitive[0].count=0,o.primitive[0].indexed=!1;var l=new pc.GraphNode,c=new pc.MeshInstance(l,o,a);c.layer=pc.LAYER_WORLD,c.cull=!1,c.updateKey(),this.model=new pc.Model,this.model.graph=l,this.model.meshInstances.push(c),this.setNode(this.entity),this.vb=s,this.isNoneState=!1,this.cachedVec=new pc.Vec3(0,0,0),this.camera=this.app.root.findByName("Camera")},Trail.prototype.postUpdate=function(e){if(this.timer+=e,this.model.meshInstances[0].material.setParameter("trail_time",this.timer),this.clearOld(),this.spawn(this.radius),this.vertices.length>1){this.copyToArrayBuffer(),this.updateNumActive();var t=this.model.meshInstances[0].mesh.vertexBuffer;new Float32Array(t.lock()).set(this.vertexData),t.unlock(),this.app.scene.containsModel(this.model)||this.app.scene.addModel(this.model)}else this.app.scene.containsModel(this.model)&&this.app.scene.removeModel(this.model)},Trail.prototype.SetOn=function(){this.reset(),this.material.setParameter("visible",!0)},Trail.prototype.SetOff=function(){this.app.scene.removeModel(this.model),this.material.setParameter("visible",!1)},Trail.prototype.visible=function(){this.material.setParameter("visible",!0)},Trail.prototype.invisible=function(){this.material.setParameter("visible",!1)},Trail.prototype.changeColor=function(e,t,i){this.material.setParameter("rValue",e),this.material.setParameter("gValue",t),this.material.setParameter("bValue",i)},Trail.prototype.reset=function(){this.oldPos=null,this.timer=0,this.vertices=[]},Trail.prototype.spawn=function(e){var t=this.node.getPosition(),i=this.camera.getPosition(),a=this.node.getPosition(),r=Trail.v1,s=Trail.m1,o=Trail.q1;r.copy(i).sub(a).normalize(),setMat4Forward(s,r,pc.Vec3.UP),o.setFromMat4(s);var l=[];if(this.oldPos){for(var c=this.oldPos.clone().sub(t),n=0;n<9;n++){var h=Math.PI/4*n;this.cachedVec.set(e*Math.cos(h),e*Math.sin(h),0),o.transformVector(this.cachedVec,this.cachedVec),this.cachedVec.add(t),l=l.concat([this.cachedVec.x,this.cachedVec.y,this.cachedVec.z,this.cachedVec.x+c.x,this.cachedVec.y+c.y,this.cachedVec.z+c.z])}this.oldPos=t.clone(),this.vertices.unshift({spawnTime:this.timer,vertexPair:l})}else this.oldPos=t.clone()},Trail.prototype.clearOld=function(){for(var e=this.vertices.length-1;e>=0;e--){var t=this.vertices[e];if(!(this.timer-t.spawnTime>=this.lifetime))return;this.vertices.pop()}},Trail.prototype.copyToArrayBuffer=function(){for(var e=0;e<this.vertices.length;e++)for(var t=this.vertices[e],i=0;i<18;i++)this.vertexData[72*e+0+4*i]=t.vertexPair[0+3*i],this.vertexData[72*e+1+4*i]=t.vertexPair[1+3*i],this.vertexData[72*e+2+4*i]=t.vertexPair[2+3*i],this.vertexData[72*e+3+4*i]=t.spawnTime},Trail.prototype.updateNumActive=function(){this.model.meshInstances[0].mesh.primitive[0].count=this.trailfadeness*this.vertices.length*9},Trail.prototype.setNode=function(e){this.node=e},Trail.prototype.Finit=function(){this.vb.destroy()},Trail.prototype.clear=function(){this.reset(),this.app.scene.containsModel(this.model)&&this.app.scene.removeModel(this.model)};var setMat4Forward=function(){var e,t,i;return e=new pc.Vec3,t=new pc.Vec3,i=new pc.Vec3,function(a,r,s){i.copy(r).scale(-1),t.copy(s).normalize(),e.cross(t,i).normalize(),t.cross(i,e);var o=a.data;return o[0]=e.x,o[1]=e.y,o[2]=e.z,o[3]=0,o[4]=t.x,o[5]=t.y,o[6]=t.z,o[7]=0,o[8]=i.x,o[9]=i.y,o[10]=i.z,o[11]=0,o[15]=1,a}}();var InstructionsManager=pc.createScript("instructionsManager");InstructionsManager.prototype.initialize=function(){let t=this;this.instructionsImage=this.entity.children[0],this.exitInstructionsButton=this.entity.children[1],this.entity.setPosition(-1e3,0,0),this.instructionsImage.element.opacity=0,this.exitInstructionsButton.element.opacity=0,this.app.on("disableInstructionsScreen",(function(){this.app.fire("disableInstructionScreenButtons"),t.tweenOpacity("off")}),this),this.app.on("enableInstructionsScreen",(function(){t.entity.enabled=!0,t.tweenOpacity("on")}),this)},InstructionsManager.prototype.tweenOpacity=function(t){this.opacityObject={value:1};let n=this,e={value:this.instructionsImage.element.opacity},i=1;"off"===t?i=0:"on"===t&&this.entity.setPosition(0,0,0),this.opacityTween=this.entity.tween(e).to({value:i},.3,pc.QuadraticInOut).delay(0).on("update",(function(){n.instructionsImage.element.opacity=e.value,n.exitInstructionsButton.element.opacity=e.value})).on("complete",(function(){"off"===t&&n.entity.setPosition(-1e3,0,0),"on"===t&&n.app.fire("enableInstructionScreenButtons")})).start()};var InstructionExitBtn=pc.createScript("instructionExitBtn");InstructionExitBtn.prototype.initialize=function(){let t=this;this.entity.button.active=!1,this.entity.button.on("touchend",(function(){t.entity.button.active=!1,this.app.fire("instructionsExitButtonRelease")}),this),this.app.on("enableInstructionScreenButtons",(function(){t.entity.button.active=!0}),this),this.app.on("disableInstructionScreenButtons",(function(){t.entity.button.active=!1}),this)};var CameraShake=pc.createScript("cameraShake");CameraShake.attributes.add("shakeInterval",{type:"number",default:.1,title:"Camera Shake Interval"}),CameraShake.attributes.add("maxShakeDistance",{type:"number",default:.1,title:"Max Shake Distance"}),CameraShake.attributes.add("duration",{type:"number",default:1,title:"Duration"}),CameraShake.prototype.initialize=function(){this.time=this.duration,this.timeSinceLastShake=0,this.tweenBack=void 0,this.hasTweenedBack=!0,this.app.on("cameraShake",this.onStartShake,this)},CameraShake.prototype.update=function(t){if(this.time+=t,this.time<this.duration){this.timeSinceLastShake+=t;let r=this.entity.getPosition().clone();if(this.timeSinceLastShake>=this.shakeInterval){var e=1-pc.math.clamp(this.time/this.duration,0,1),a=2*Math.PI*pc.math.random(0,1),i=pc.math.random(0,this.maxShakeDistance)*e+pc.math.random(0,this.maxShakeDistance)*e,h=i>1?2-i:i,s=h*Math.cos(a),n=h*Math.sin(a);this.entity.setPosition(r.x+s,r.y+n,r.z),this.timeSinceLastShake-=this.shakeInterval}}else this.hasTweenedBack||(this.tweenBack=this.entity.tween(this.entity.getLocalPosition()).to(new pc.Vec3(0,0,0),1,pc.QuadraticOut).start(),this.hasTweenedBack=!0)},CameraShake.prototype.onStartShake=function(){this.time=0,this.hasTweenedBack=!1};var ParticleSystemManager=pc.createScript("particleSystemManager");ParticleSystemManager.prototype.initialize=function(){let t=this,a=this.app.root.findByName("dustCloudParent").particlesystem,e=this.app.root.findByName("hoopStreakParticle").particlesystem,p=this.app.root.findByName("hoopSplashParticle").particlesystem;this.app.on("playParticle",(function(i){"landingDust"===i?(a.reset(),a.play()):"shotSplash"===i?(p.reset(),p.play(),t.app.tween({}).to({},.2,pc.Linear).on("complete",(function(){p.stop()})).start()):"hoopStreak"===i&&e.play()})),this.app.on("stopParticle",(function(t){"hoopStreak"===t&&e.isPlaying()&&e.stop()}))};var EndScreenManager=pc.createScript("endScreenManager");EndScreenManager.prototype.initialize=function(){let t=this;this.entity.setPosition(-1e3,0,0),this.bgElement=this.entity.children[0],this.winBtnGrp=this.entity.children[1],this.loseBtnGrp=this.entity.children[2],this.loseBtnGrp.setLocalPosition(0,0,0),this.winBtnGrp.setLocalPosition(0,-1e4,0),this.opacityTween=void 0,this.opacityComponents=this.entity.findComponents("element"),this.opacityComponents.forEach((function(t){t.opacity=0})),this.isVisible=!1,this.panRect=new pc.Vec4(0,0,3.1,4.98),this.textParent=this.entity.children[3].children[1],this.app.on("disableEndScreen",(function(){this.app.fire("disableEndScreenButtons"),t.tweenOpacity("off"),t.isVisible=!1}),this),this.app.on("enableEndScreen",(function(e){e>=20&&(this.loseBtnGrp.setLocalPosition(0,-1e4,0),this.winBtnGrp.setLocalPosition(0,0,0)),t.tweenOpacity("on"),t.isVisible=!0}),this),this.app.on("scoreCardUpdate",(function(e,n,i,o,s){t.textParent.children[0].element.text=e.toString(),t.textParent.children[1].element.text=n.toString(),t.textParent.children[2].element.text=i.toString(),t.textParent.children[3].element.text=o.toString(),t.textParent.children[4].element.text=s.toString()}),this)},EndScreenManager.prototype.update=function(t){this.isVisible&&(this.panRect.x-=.0015,this.panRect.y+=.0015,this.bgElement.element.rect=this.panRect)},EndScreenManager.prototype.tweenOpacity=function(t){this.opacityObject={value:1};let e=this,n={value:this.bgElement.element.opacity},i=1;"off"===t?i=0:"on"===t&&this.entity.setPosition(0,0,0),this.opacityTween=this.entity.tween(n).to({value:i},.3,pc.QuadraticInOut).delay(0).on("update",(function(){e.opacityComponents.forEach((function(t){t.opacity=n.value}))})).on("complete",(function(){0===i&&e.entity.setPosition(-1e3,0,0),"on"===t&&e.app.fire("enableEndScreenButtons")})).start()};var PlayAgain=pc.createScript("playAgain");PlayAgain.prototype.initialize=function(){let t=this;this.entity.button.active=!1,this.buttonOpacityObject={value:1},this.buttonOpacityTween=this.entity.tween(this.buttonOpacityObject).to({value:.85},1.25,pc.QuadraticInOut).yoyo(!0).loop(!0).on("update",(function(){t.entity.element.opacity=t.buttonOpacityObject.value})),this.entity.button.on("touchend",(function(){t.entity.button.active=!1,this.app.fire("playAgainButtonRelease")}),this),this.app.on("enableEndScreenButtons",(function(){t.entity.button.active=!0,t.buttonOpacityObject.value=1,t.buttonOpacityTween.start()}),this),this.app.on("disableEndScreenButtons",(function(){t.buttonOpacityTween.stop(),t.entity.button.active=!1}),this)};var Ao=pc.createScript("ao");Ao.prototype.initialize=function(){this.app.scene.lightmapFilterEnabled=!0,this.app.scene.lightmapFilterSmoothness=.2,this.app.scene.lightmapMode=pc.BAKE_COLOR,this.app.scene.ambientBake=!0,this.app.scene.ambientBakeNumSamples=50,this.app.scene.ambientBakeOcclusionContrast=0,this.app.scene.ambientBakeOcclusionBrightness=-1,this.app.scene.ambientBakeSpherePart=.4};var IOspressFix=pc.createScript("iOspressFix");IOspressFix.prototype.initialize=function(){document.body.style["-webkit-user-select"]="none"};var ClaimPrizeBtn=pc.createScript("claimPrizeBtn");ClaimPrizeBtn.prototype.initialize=function(){let t=this;this.entity.button.on("touchend",(function(){window.top.location.href="https://mp.vibescm.com/c/7vx95e"}),this),this.app.on("enableEndScreenButtons",(function(){t.entity.button.active=!0}),this),this.app.on("disableEndScreenButtons",(function(){t.entity.button.active=!1}),this)};var SliderManager=pc.createScript("sliderManager");SliderManager.attributes.add("slider",{type:"entity"}),SliderManager.attributes.add("topBound",{type:"entity"}),SliderManager.attributes.add("bottomBound",{type:"entity"}),SliderManager.attributes.add("sliderGhost",{type:"entity"}),SliderManager.prototype.initialize=function(){let t=this;this.entity.enabled=!0,this.sliderBG=this.app.root.findByName("sliderBG"),this.sliderShadow=this.app.root.findByName("sliderShadow"),this.sliderFG=this.app.root.findByName("sliderFG"),this.progressImage=this.sliderFG.children[0],this.setProgress(0),this.opacityComponents=this.entity.findComponents("element"),this.opacityComponents.forEach((function(t){t.opacity=0})),this.ghostOffScreenPosition=this.sliderGhost.getPosition(),this.originalGhostScale=this.sliderGhost.getLocalScale().clone(),this.sliderGhost.setPosition(this.ghostOffScreenPosition),this.ghostTween=this.sliderGhost.tween(this.sliderGhost.getLocalScale()).to(new pc.Vec3(0,0,0),.15,pc.QuadraticIn).on("complete",(function(){t.sliderGhost.setPosition(t.ghostOffScreenPosition)})),this.sliderTweenCounter=0,this.tweenAlpha=0,this.previousAlpha=0,this.didStopSlider=!1,this.slider.setPosition(this.bottomBound.getPosition()),this.sliderTween=void 0,this.app.on("startSlider",(function(e){this.didStopSlider=!1,null!=this.sliderTween&&this.sliderTween.stop(),this.slider.setPosition(this.bottomBound.getPosition()),this.sliderTween=this.slider.tween(this.slider.getLocalPosition()).to(this.topBound.getLocalPosition(),e,pc.Linear).yoyo(!0).on("update",(function(i){t.sliderTweenCounter+=i,t.tweenAlpha=t.sliderTweenCounter/e,t.tweenAlpha<1?t.setProgress(t.tweenAlpha):t.setProgress(2-t.tweenAlpha)})).on("complete",(function(){t.sliderTweenCounter=0,t.tweenAlpha=0})).repeat(2),this.sliderTween.start(),this.ghostTween.start()}),this),this.app.on("stopSlider",(function(){this.didStopSlider=!0,this.sliderTween.stop(),null!=this.ghostTween&&this.ghostTween.stop(),this.sliderGhost.setPosition(this.slider.getPosition()),this.sliderGhost.setLocalScale(this.originalGhostScale),this.sliderGhost.element.opacity=.3,this.app.fire("sliderEndAlphaSend",100*this.tweenAlpha),this.sliderTweenCounter=0,this.previousAlpha=this.tweenAlpha,this.tweenAlpha=0}),this),this.app.on("sliderBackToOrigin",(function(){t.previousAlpha>1&&(t.previousAlpha=2-t.previousAlpha);let e=0,i=.4,s=0;t.didStopSlider&&(t.sliderTween=t.slider.tween(t.slider.getLocalPosition()).to(t.bottomBound.getLocalPosition(),i,pc.QuadraticOut).yoyo(!0).on("update",(function(o){s+=o,e=t.previousAlpha*(1-s/i),t.setProgress(e)})).on("complete",(function(){e=0,i=.4,s=0})).delay(.2).start())})),this.app.on("resetInGameUI",(function(){this.sliderTweenCounter=0,this.setProgress(0),this.tweenAlpha=0,this.slider.setPosition(t.bottomBound.getPosition()),this.sliderGhost.setPosition(t.ghostOffScreenPosition)}),this),this.app.on("enableInGameUI",(function(){this.tweenOpacity("on")}),this),this.app.on("disableInGameUI",(function(){this.ghostTween.start(),this.tweenOpacity("off")}),this)},SliderManager.prototype.setProgress=function(t){t=pc.math.clamp(t,0,1),this.progress=t;var e=pc.math.lerp(0,32,t);this.progressImage.element.height=e,this.progressImage.element.rect.y=t},SliderManager.prototype.tweenOpacity=function(t){let e=this,i={value:this.slider.element.opacity},s=1;"off"===t&&(s=0),this.opacityTween=this.entity.tween(i).to({value:s},.3,pc.QuadraticInOut).delay(0).on("update",(function(){e.opacityComponents.forEach((function(e){"off"===t&&e.opacity<i.value||(e.opacity=i.value)}))})).start()};