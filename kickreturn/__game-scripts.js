var PlayerMovement=pc.createScript("playerMovement");function easeOutQuint(t){return 1+--t*t*t*t*t}PlayerMovement.prototype.initialize=function(){this.isGameInPlay=!1,this.gridPosition=2,this.latStartPosition=0,this.latTargetPosition=lateralPositions[this.gridPosition],this.latSecsSinceStart=0,this.latLerpDuration=.25,this.downStartPosition=this.app.root.findByName("startPositionEntity").getLocalPosition().x-1,this.downTargetPosition=-11,this.downSecsSinceStart=0,this.downLerpDuration=10,this.app.on("moveRightButtonRelease",this.moveRight,this),this.app.on("moveLeftButtonRelease",this.moveLeft,this),this.app.on("tackle",(function(){this.isGameInPlay=!1}),this),this.app.on("gameStart",(function(){this.isGameInPlay=!0}),this),this.app.on("reset",this.resetPlayer,this),this.app.on("endScreenIsFullScreen",(function(){this.entity.enabled=!1}),this)},PlayerMovement.prototype.update=function(t){if(this.isGameInPlay){this.latSecsSinceStart+=t,this.latSecsSinceStart=Math.min(this.latSecsSinceStart,this.latLerpDuration);var i=easeOutQuint(this.latSecsSinceStart/this.latLerpDuration),o=pc.math.lerp(this.latStartPosition,this.latTargetPosition,i);this.downSecsSinceStart+=t,this.downSecsSinceStart=Math.min(this.downSecsSinceStart,this.downLerpDuration);var s=this.downSecsSinceStart/this.downLerpDuration,e=pc.math.lerp(this.downStartPosition,this.downTargetPosition,s);this.entity.setLocalPosition(e,0,o),1===s&&(this.app.fire("touchdown"),this.isGameInPlay=!1)}},PlayerMovement.prototype.moveRight=function(){this.latStartPosition=this.entity.getLocalPosition().z,this.latSecsSinceStart=0,this.gridPosition<4&&(this.gridPosition+=1),this.latTargetPosition=lateralPositions[this.gridPosition]},PlayerMovement.prototype.moveLeft=function(){this.latStartPosition=this.entity.getLocalPosition().z,this.latSecsSinceStart=0,this.gridPosition>0&&(this.gridPosition-=1),this.latTargetPosition=lateralPositions[this.gridPosition]},PlayerMovement.prototype.resetPlayer=function(){this.entity.enabled=!0,this.entity.setLocalPosition(this.app.root.findByName("startPositionEntity").getLocalPosition()),this.gridPosition=2,this.latStartPosition=0,this.latTargetPosition=lateralPositions[this.gridPosition],this.latSecsSinceStart=0,this.latLerpDuration=.25,this.downStartPosition=this.app.root.findByName("startPositionEntity").getLocalPosition().x-1,this.downTargetPosition=-11,this.downSecsSinceStart=0,this.downLerpDuration=10};var MoveLeftButton=pc.createScript("moveLeftButton");MoveLeftButton.prototype.initialize=function(){this.entity.button.active=!1,this.app.on("gameStart",(function(){this.entity.button.active=!0}),this),this.app.on("touchdown",(function(){this.entity.button.active=!1}),this),this.app.on("tackle",(function(){this.entity.button.active=!1}),this),this.entity.button.on("touchend",(function(){this.app.fire("moveLeftButtonRelease")}),this)};var MoveRightButton=pc.createScript("moveRightButton");MoveRightButton.prototype.initialize=function(){this.entity.button.active=!1,this.app.on("gameStart",(function(){this.entity.button.active=!0}),this),this.app.on("touchdown",(function(){this.entity.button.active=!1}),this),this.app.on("tackle",(function(){this.entity.button.active=!1}),this),this.entity.button.on("touchend",(function(){this.app.fire("moveRightButtonRelease")}),this)};pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);this._add.length&&(this._tweens=this._tweens.concat(this._add),this._add.length=0)}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},_parseProperties=function(t){var i;return t instanceof pc.Vec2?i={x:t.x,y:t.y}:t instanceof pc.Vec3?i={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?i={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(i={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(i.a=t.a)):i=t,i};Tween.prototype={to:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this},from:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var t,i,e,n;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(i,e,n))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._toQuat.setFromEulerAngles(i,e,n))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,n,s=0===this.duration?1:this.time/this.duration,r=this.easing(s);for(var h in this._properties)this._properties.hasOwnProperty(h)&&(e=this._sv[h],n=this._ev[h],this.target[h]=e+(n-e)*r);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties){var e=this._sv[i];this._sv[i]=this._ev[i],this._ev[i]=e}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},BounceIn=function(t){return 1-BounceOut(1-t)};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,n=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=n*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*.5+1)}}}()),function(){pc.Application.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",(function(t){this._tweenManager.update(t)}))},pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.once("destroy",e.stop,e),i&&i.element&&(e.element=i.element),e};var t=pc.Application.getApplication();t&&t.addTweenManager()}();var DefenderManager=pc.createScript("defenderManager");DefenderManager.prototype.initialize=function(){this.isGameInPlay=!1,this.defenderSpawnArray=[0,0,0,0,0],this.lastGapPosition=-1,this.offScreenPosition=new pc.Vec3(50,50,50),this.deltaTime=.2,this.timeUntilSpawn=1.25,this.disable(),this.app.on("tackle",(function(){this.isGameInPlay=!1}),this),this.app.on("gameStart",(function(){this.entity.enabled=!0,this.isGameInPlay=!0,this.deltaTime=.9}),this),this.app.on("reset",this.reset,this),this.app.on("kickoffComplete",this.reset,this),this.app.on("endScreenIsFullScreen",this.disable,this)},DefenderManager.prototype.update=function(t){this.isGameInPlay&&(this.entity.setLocalPosition(this.app.root.findByName("player").getLocalPosition().x-6.3,0,0),this.entity.getLocalPosition().x<-11.5&&(this.entity.enabled=!1),this.deltaTime+=t,this.deltaTime>=this.timeUntilSpawn&&(this.spawnDefenders(),this.deltaTime=0))},DefenderManager.prototype.spawnDefenders=function(){this.defenderSpawnArray.fill(1);var t,e,i=Math.floor(5*Math.random());i===this.lastGapPosition&&(i>2?i-=1:i+=1),this.defenderSpawnArray[i]=0,this.lastGapPosition=i;for(var n=0;n<5;n++){var a="defender",o=n.toString();a=a.concat(o),1===this.defenderSpawnArray[n]?(t=lateralPositions[n],e=this.entity.getLocalPosition().x,this.app.root.findByName(a).setLocalPosition(e,0,t)):this.app.root.findByName(a).setLocalPosition(this.offScreenPosition)}},DefenderManager.prototype.reset=function(){for(var t=0;t<5;t++){var e="defender",i=t.toString();e=e.concat(i),this.app.root.findByName(e).enabled=!0,this.app.root.findByName(e).setLocalPosition(this.offScreenPosition)}},DefenderManager.prototype.disable=function(){for(var t=0;t<5;t++){var e="defender",i=t.toString();e=e.concat(i),this.app.root.findByName(e).enabled=!1}};var GameData=pc.createScript("gameData"),lateralPositions=[2.7,1.35,0,-1.35,-2.7];var DefenderRun=pc.createScript("defenderRun");DefenderRun.prototype.initialize=function(){this.speed=4.1,this.tackled=!1,this.touchdown=!1,this.app.on("gameStart",(function(){this.tackled=!1,this.touchdown=!1}),this),this.app.on("touchdown",(function(){this.touchdown=!0}),this)},DefenderRun.prototype.update=function(t){if(!1===this.tackled&&!1===this.touchdown){this.entity.translate(t*this.speed,0,0);var i=Math.abs(this.entity.getLocalPosition().x-this.app.root.findByName("player").getLocalPosition().x),e=(Math.abs(this.entity.getLocalPosition().y-this.app.root.findByName("player").getLocalPosition().y),Math.abs(this.entity.getLocalPosition().z-this.app.root.findByName("player").getLocalPosition().z));i<.4&&e<.1&&(this.app.fire("tackle",this.entity),this.tackled=!0)}};var CameraMoves=pc.createScript("cameraMoves");CameraMoves.attributes.add("target",{type:"entity",title:"Target",description:"The Entity to follow"}),CameraMoves.attributes.add("distance",{type:"number",default:4,title:"Distance",description:"How far from the Entity should the follower be"}),CameraMoves.prototype.initialize=function(){this.isGameInPlay=!1,this.gameStartCamLocation=new pc.Vec3(15,6.8,0),this.gameStartCamRotation=new pc.Vec3(-62,90,0),this.followVector=new pc.Vec3,this.app.on("touchdown",this.touchdownCameraMove,this),this.app.on("tackle",this.tackleCameraMove,this),this.app.on("kickoffComplete",this.kickOffCameraMove,this),this.app.on("reset",this.reset,this),this.app.on("gameStart",(function(){this.isGameInPlay=!0,this.followVector=this.entity.getLocalPosition()}),this)},CameraMoves.prototype.update=function(t){if(this.isGameInPlay){var e=this.target.getPosition();e.x+=.7*this.distance,e.y+=1.65*this.distance,this.followVector.lerp(this.followVector,e,.05),this.entity.setPosition(this.followVector)}},CameraMoves.prototype.touchdownCameraMove=function(){this.isGameInPlay=!1,this.tween&&this.tween.stop();var t=this.app.root.findByName("player").getLocalPosition().clone();t.x+=2.3,t.y+=1,t.z-=2,this.tween=this.entity.tween(this.entity.getLocalPosition()).to(t,1.5,pc.QuadraticInOut).delay(0).loop(!1).yoyo(!1).start(),this.entity.setLocalEulerAngles(this.gameStartCamRotation),this.tween=this.entity.tween(this.entity.getLocalEulerAngles()).rotate(new pc.Vec3(163,64,180),1.5,pc.QuadraticInOut).delay(0).loop(!1).yoyo(!1).start()},CameraMoves.prototype.tackleCameraMove=function(){this.isGameInPlay=!1,this.tween&&this.tween.stop();var t=this.app.root.findByName("player").getLocalPosition().clone();t.x+=2.65,t.y+=1.1,t.z-=2.1,this.tween=this.entity.tween(this.entity.getLocalPosition()).to(t,.8,pc.QuadraticInOut).delay(0).loop(!1).yoyo(!1).start(),this.entity.setLocalEulerAngles(this.gameStartCamRotation),this.tween=this.entity.tween(this.entity.getLocalEulerAngles()).rotate(new pc.Vec3(152.53,42.2,179.02),.8,pc.QuadraticInOut).delay(0).loop(!1).yoyo(!1).start()},CameraMoves.prototype.kickOffCameraMove=function(){this.isGameInPlay=!1,this.tween&&this.tween.stop(),this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.gameStartCamLocation,2.5,pc.QuadraticInOut).delay(0).loop(!1).yoyo(!1).start(),this.tween=this.entity.tween(this.entity.getLocalEulerAngles()).rotate(this.gameStartCamRotation,2.5,pc.QuadraticInOut).delay(0).loop(!1).yoyo(!1).start()},CameraMoves.prototype.reset=function(){this.entity.setLocalPosition(this.gameStartCamLocation),this.entity.setLocalEulerAngles(this.gameStartCamRotation)};var RunnerAnimBlend=pc.createScript("runnerAnimBlend");RunnerAnimBlend.states={runCycle:{animation:"runCycleRunner.glb"},tackle:{animation:"tackleRunner.glb"},touchdown:{animation:"victory.glb"},kickRecieve:{animation:"kickRecieve.glb"}},RunnerAnimBlend.prototype.initialize=function(){this.blendTime=0,this.app.on("tackle",this.tackle,this),this.app.on("touchdown",this.touchdown,this),this.app.on("startButtonPress",this.gameStartKickRecieve,this),this.app.on("gameStart",(function(){this.blendTime=0,this.setState("runCycle"),this.entity.animation.loop=!0}),this),this.app.on("reset",this.kickRecieve,this)},RunnerAnimBlend.prototype.setState=function(t){var e=RunnerAnimBlend.states;this.state=t,this.entity.animation.play(e[t].animation,this.blendTime)},RunnerAnimBlend.prototype.tackle=function(){this.entity.animation.loop=!1,this.blendTime=0,this.setState("tackle")},RunnerAnimBlend.prototype.touchdown=function(){this.entity.animation.loop=!1,this.blendTime=.5,this.setState("touchdown")},RunnerAnimBlend.prototype.gameStartKickRecieve=function(){this.app.tween({}).to({},3,pc.Linear).delay(0).on("complete",(function(){this.kickRecieve()}),this).start()},RunnerAnimBlend.prototype.kickRecieve=function(){this.entity.animation.loop=!1,this.blendTime=0,this.setState("kickRecieve"),this.app.tween({}).to({},2.5,pc.Linear).delay(0).on("complete",(function(){this.app.fire("gameStart")}),this).start()};var DefenderAnimBlend=pc.createScript("defenderAnimBlend");DefenderAnimBlend.states={runCycle:{animation:"runCycleDefender.glb"},tackle:{animation:"tackleDefender.glb"}},DefenderAnimBlend.prototype.initialize=function(){this.blendTime=.2,this.setState("runCycle"),this.app.on("tackle",this.tackle,this),this.app.on("reset",(function(){this.setState("runCycle"),this.entity.animation.loop=!0,this.entity.setEulerAngles(0,90,0)}),this)},DefenderAnimBlend.prototype.setState=function(e){var t=DefenderAnimBlend.states;this.state=e,this.entity.animation.play(t[e].animation,this.blendTime)},DefenderAnimBlend.prototype.tackle=function(e){this.entity===e&&(this.entity.animation.loop=!1,this.blendTime=0,this.setState("tackle"),this.entity.setEulerAngles(0,-90,0),this.entity.setLocalPosition(this.app.root.findByName("player").getLocalPosition().clone()))};var StartButton=pc.createScript("startButton");StartButton.prototype.initialize=function(){var t=this;this.offScreenPos=new pc.Vec3(-175,6.484,0),this.onScreenPos=new pc.Vec3(0,6.484,0),this.entity.setLocalPosition(this.onScreenPos);var e=new pc.Vec3(1,1,1);this.entity.element.opacity;this.opacityTween=this.entity.tween(e).to(new pc.Vec3(.7,.7,.7),1.4,pc.QuadraticInOut).loop(!0).yoyo(!0).delay(5).on("update",(function(){this.entity.element.opacity=e.x})).start(),this.entity.button.on("touchstart",(function(){this.opacityTween.stop(),this.app.fire("disableInstructions")}),this),this.entity.button.on("touchend",(function(){this.app.fire("startButtonPress"),t.entity.button.active=!1,this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.offScreenPos,.8,pc.QuadraticIn).delay(0).loop(!1).yoyo(!1).on("complete",(()=>{t.entity.destroy(),this.entity.enabled=!1}),this).start()}),this)};var Kickoff=pc.createScript("kickoff");Kickoff.states={kickoff:{animation:"kickoff.glb"},kickoffIdle:{animation:"kickoffIdle.glb"}},Kickoff.prototype.initialize=function(){this.blendTime=.2,this.entity.animation.loop=!0,this.entity.animation.play(Kickoff.states.kickoffIdle.animation,this.blendTime),this.app.on("startButtonPress",this.playKickoff,this)},Kickoff.prototype.playKickoff=function(){this.entity.animation.play(Kickoff.states.kickoff.animation,this.blendTime),this.entity.animation.loop=!1,this.app.tween({}).to({},1.8,pc.Linear).delay(0).on("complete",(function(){this.app.fire("kickoffComplete"),this.app.tween({}).to({},1.8,pc.Linear).delay(0).on("complete",(function(){this.entity.destroy()}),this).start()}),this).start()};var WinScreenAnimation=pc.createScript("winScreenAnimation");WinScreenAnimation.prototype.initialize=function(){this.entity.enabled=!1,this.offScreenPos=new pc.Vec3(0,876,0),this.onScreenPos=new pc.Vec3(0,0,0),this.entity.setLocalPosition(this.offScreenPos),this.app.on("touchdown",(function(){this.entity.enabled=!0,this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.onScreenPos,.8,pc.QuadraticOut).delay(2.25).loop(!1).yoyo(!1).on("complete",(()=>{this.app.fire("endScreenIsFullScreen")}),this),this.tween.start()}),this),this.app.on("reset",(function(){this.entity.enabled=!0,this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.offScreenPos,.8,pc.QuadraticIn).delay(.2).loop(!1).yoyo(!1),this.tween.start()}),this)};var ClaimCouponButton=pc.createScript("claimCouponButton");ClaimCouponButton.prototype.initialize=function(){var t=this;this.entity.button.active=!1,this.app.on("endScreenIsFullScreen",(function(){t.entity.button.active=!0}),this),this.app.on("reset",(function(){t.entity.button.active=!1}),this),this.entity.button.on("touchend",(function(){window.top.location.href="https://mp.vibescm.com/c/2qj895"}),this)};var LoseScreenAnimation=pc.createScript("loseScreenAnimation");LoseScreenAnimation.prototype.initialize=function(){this.entity.enabled=!1,this.offScreenPos=new pc.Vec3(0,876,0),this.onScreenPos=new pc.Vec3(0,0,0),this.entity.setLocalPosition(this.offScreenPos),this.app.on("tackle",(function(){this.entity.enabled=!0,this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.onScreenPos,.8,pc.QuadraticOut).delay(1.5).loop(!1).yoyo(!1).on("complete",(()=>{this.app.fire("endScreenIsFullScreen")}),this),this.tween.start()}),this),this.app.on("reset",(function(){this.entity.enabled=!0,this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.offScreenPos,.8,pc.QuadraticIn).delay(.2).loop(!1).yoyo(!1),this.tween.start()}),this)};var ResetButton=pc.createScript("resetButton");ResetButton.prototype.initialize=function(){this.entity.button.active=!1,this.entity.button.on("touchend",(function(){this.app.fire("reset")}),this),this.app.on("endScreenIsFullScreen",(function(){this.entity.button.active=!0}),this),this.app.on("reset",(function(){this.entity.button.active=!1}),this)};var LeftRightGroupAnim=pc.createScript("leftRightGroupAnim");LeftRightGroupAnim.prototype.initialize=function(){var t=this;this.offScreenPosL=new pc.Vec3(-179,0,0),this.offScreenPosR=new pc.Vec3(179,0,0),this.onScreenPos=new pc.Vec3(0,0,0),this.entity.enabled=!0,this.entity.setLocalPosition(this.offScreenPosR),this.app.on("startButtonPress",(function(){t.ontoScreen()}),this),this.app.on("touchdown",(function(){t.offofScreenL()}),this),this.app.on("tackle",(function(){t.offofScreenL()}),this),this.app.on("reset",(function(){t.ontoScreen()}),this)},LeftRightGroupAnim.prototype.ontoScreen=function(){this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.onScreenPos,.8,pc.QuadraticOut).delay(.5).loop(!1).yoyo(!1).start()},LeftRightGroupAnim.prototype.offofScreenL=function(){this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.offScreenPosL,.8,pc.QuadraticIn).delay(0).loop(!1).yoyo(!1).start()};var BottomWinGrpAnim=pc.createScript("bottomWinGrpAnim");BottomWinGrpAnim.prototype.initialize=function(){var t=this;this.entity.enabled=!0,this.offScreenPos=new pc.Vec3(205,0,0),this.onScreenPos=new pc.Vec3(0,0,0),this.entity.setLocalPosition(this.offScreenPos),this.app.on("touchdown",(function(){console.log("in touchdown"),t.ontoScreen()}),this),this.app.on("reset",(function(){t.offofScreenR()}),this)},BottomWinGrpAnim.prototype.ontoScreen=function(){console.log("should be tweenin"),this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.onScreenPos,.8,pc.QuadraticOut).delay(.5).loop(!1).yoyo(!1).start()},BottomWinGrpAnim.prototype.offofScreenR=function(){this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.offScreenPos,.8,pc.QuadraticIn).delay(0).loop(!1).yoyo(!1).start()};var BottomLoseGrpAnim=pc.createScript("bottomLoseGrpAnim");BottomLoseGrpAnim.prototype.initialize=function(){var t=this;this.entity.enabled=!0,this.offScreenPos=new pc.Vec3(180,0,0),this.onScreenPos=new pc.Vec3(0,0,0),this.entity.setLocalPosition(this.offScreenPos),this.app.on("tackle",(function(){t.ontoScreen()}),this),this.app.on("reset",(function(){t.offofScreenR()}),this)},BottomLoseGrpAnim.prototype.ontoScreen=function(){this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.onScreenPos,.8,pc.QuadraticOut).delay(.5).loop(!1).yoyo(!1).start()},BottomLoseGrpAnim.prototype.offofScreenR=function(){this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.offScreenPos,.8,pc.QuadraticIn).delay(0).loop(!1).yoyo(!1).start()};var Instructions=pc.createScript("instructions");Instructions.prototype.initialize=function(){var t=this,i=new pc.Vec3(.8,.8,.8);this.entity.element.opacity;this.app.once("disableInstructions",(function(){this.opacityTween=this.entity.tween(i).to(new pc.Vec3(.2,.2,.2),.1,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){t.entity.element.opacity=i.x})).start()}),this)};var FrontCard=pc.createScript("frontCard");FrontCard.prototype.initialize=function(){this.offScreenPos=new pc.Vec3(-550,0,0),this.onScreenPos=new pc.Vec3(0,0,0),this.entity.setLocalPosition(this.offScreenPos),this.entity.enabled=!0;var t=this;this.app.root.findByName("startButton").button.active=!1,this.tweenOn=this.entity.tween(this.entity.getLocalPosition()).to(this.onScreenPos,.8,pc.QuadraticOut).delay(0).loop(!1).yoyo(!1).start(),this.tweenOn.on("complete",(function(){t.app.root.findByName("startButton").button.active=!0})),this.tweenOff=void 0,this.app.on("startButtonPress",(function(){this.app.root.findByName("startButton").button.active=!1,this.tweenOff=this.entity.tween(this.entity.getLocalPosition()).to(this.offScreenPos,.8,pc.QuadraticIn).delay(0).loop(!1).yoyo(!1).start(),this.tweenOff.on("complete",(function(){t.app.fire("startGame"),this.entity.destroy()}))}),this)};