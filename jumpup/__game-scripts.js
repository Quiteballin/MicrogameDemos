var PlayerPhysicsy=pc.createScript("playerPhysicsy");PlayerPhysicsy.prototype.initialize=function(){var t=this;this.entity.setPosition(new pc.Vec3(0,1.3,0)),this.movementTween=void 0,this.normalJumpHeight=1,this.fallingCoefficient=1,this.fallSpeed=2.4,this.falling=!0,this.lowerBoundHeight=this.app.root.findByName("lowerBound").getPosition().y,this.deathHeight=this.app.root.findByName("killPlane").getPosition().y,this.isDead=!1,this.app.on("jump",this.jump,this),this.app.on("spikeHit",this.spikeDeath,this),this.app.on("falling",(function(){t.falling=!0}),this),this.app.on("notFalling",(function(){t.falling=!1}),this),this.app.on("reset",(function(){this.entity.setPosition(new pc.Vec3(0,0,0)),this.movementTween=void 0,this.falling=!0,this.isDead=!1}),this)},PlayerPhysicsy.prototype.update=function(t){if(!this.isDead&&(this.falling&&(this.fallingCoefficient<=1&&(this.fallingCoefficient+=5*t),this.entity.translate(0,t*this.fallingCoefficient*-this.fallSpeed,0)),this.entity.getPosition().y<this.deathHeight)){this.app.fire("dead"),this.isDead=!0;let t=this.entity.getLocalPosition().clone();t.y-=3,this.movementTween=this.entity.tween(this.entity.getLocalPosition()).to(t,.5,pc.Linear).delay(0).loop(!1).yoyo(!1).start()}},PlayerPhysicsy.prototype.jump=function(){if(!this.isDead){this.fallingCoefficient=0;var t=this,i=this.entity.getLocalPosition(),e=new pc.Vec3(i.x,this.normalJumpHeight,i.z);i.y<this.lowerBoundHeight&&(e.y=e.y-(this.lowerBoundHeight-i.y)),null!=this.movementTween&&this.movementTween.stop(),this.movementTween=this.entity.tween(this.entity.getLocalPosition()).to(e,.5,pc.QuadraticOut).delay(0).loop(!1).yoyo(!1).onComplete((function(){t.app.fire("falling"),t.movementTween=void 0}),this).start()}},PlayerPhysicsy.prototype.spikeDeath=function(){var t=this,i=this.entity.getLocalPosition().clone();i.y+=.5,null!=this.movementTween&&this.movementTween.stop(),this.movementTween=this.entity.tween(this.entity.getLocalPosition()).to(i,.3,pc.QuadraticOut).delay(0).loop(!1).yoyo(!1).onComplete((function(){let i=new pc.Vec3(0,0,0);i.y=t.app.root.findByName("killPlane").getPosition().y-.5,t.movementTween=t.entity.tween(t.entity.getLocalPosition()).to(i,.6,pc.QuadraticIn).delay(0).loop(!1).yoyo(!1).start()}),this).start()};var MainCharAnim=pc.createScript("mainCharAnim");MainCharAnim.prototype.initialize=function(){var i=this;this.app.on("jump",(function(){i.entity.sprite.speed=1,i.entity.sprite.play("jump"),i.entity.sprite.frame=0}),this),this.app.on("spikeHit",(function(){i.entity.sprite.speed=1,i.entity.sprite.play("spikeDeath"),i.entity.sprite.frame=0}),this)},MainCharAnim.prototype.update=function(i){7===this.entity.sprite.clip("jump").frame&&this.entity.sprite.clip("jump").isPlaying&&this.entity.sprite.play("fallingIdle")};var MoveLeftButton=pc.createScript("moveLeftButton");MoveLeftButton.prototype.initialize=function(){this.entity.button.active=!1,this.entity.button.on("pressedstart",(function(){this.app.fire("moveLeftButtonPress")}),this),this.entity.button.on("pressedend",(function(){this.app.fire("moveLeftButtonRelease")}),this),this.app.on("dead",(function(){this.app.fire("moveLeftButtonRelease"),this.entity.button.active=!1}),this),this.app.on("movementButtonsActive",(function(){this.entity.button.active=!0}),this)};var MoveRightButton=pc.createScript("moveRightButton");MoveRightButton.prototype.initialize=function(){this.entity.button.active=!1,this.entity.button.on("pressedstart",(function(){this.app.fire("moveRightButtonPress")}),this),this.entity.button.on("pressedend",(function(){this.app.fire("moveRightButtonRelease")}),this),this.app.on("dead",(function(){this.app.fire("moveRightButtonRelease"),this.entity.button.active=!1}),this),this.app.on("movementButtonsActive",(function(){this.entity.button.active=!0}),this)};var PlayerPhysicsx=pc.createScript("playerPhysicsx");PlayerPhysicsx.prototype.initialize=function(){this.entity.setPosition(new pc.Vec3(0,0,0)),this.leftWallBoundary=this.app.root.findByName("Lwall").getPosition().x,this.rightWallBoundary=this.app.root.findByName("Rwall").getPosition().x,this.movementSpeed=2.1,this.movementCoefficient=0,this.isLeftButtonPressed=!1,this.isRightButtonPressed=!1,this.app.on("moveLeftButtonPress",(function(){this.isLeftButtonPressed=!0}),this),this.app.on("moveRightButtonPress",(function(){this.isRightButtonPressed=!0}),this),this.app.on("moveLeftButtonRelease",(function(){this.isLeftButtonPressed=!1,this.movementCoefficient=0}),this),this.app.on("moveRightButtonRelease",(function(){this.isRightButtonPressed=!1,this.movementCoefficient=0}),this),this.app.on("reset",(function(){this.entity.setPosition(new pc.Vec3(0,0,0)),this.movementCoefficient=0,this.isLeftButtonPressed=!1,this.isRightButtonPressed=!1}),this)},PlayerPhysicsx.prototype.update=function(t){if((this.isLeftButtonPressed||this.isRightButtonPressed)&&this.movementCoefficient<=1&&(this.movementCoefficient+=8*t),!0===this.isLeftButtonPressed&&this.entity.translate(t*-this.movementSpeed*this.movementCoefficient,0,0),!0===this.isRightButtonPressed&&this.entity.translate(t*this.movementSpeed*this.movementCoefficient,0,0),this.entity.getPosition().x<this.leftWallBoundary){var i=this.entity.getPosition().y,e=this.entity.getPosition().z;this.entity.setPosition(new pc.Vec3(this.rightWallBoundary-.01,i,e))}else if(this.entity.getPosition().x>this.rightWallBoundary){var s=this.entity.getPosition().y,n=this.entity.getPosition().z;this.entity.setPosition(new pc.Vec3(this.leftWallBoundary+.01,s,n))}};var PlatformManager=pc.createScript("platformManager");PlatformManager.prototype.initialize=function(){this.platOneVCollision=new pc.Vec3(0,.045,0),this.platOneLCollision=new pc.Vec3(-.22,0,0),this.platOneRCollision=new pc.Vec3(.22,0,0),this.platTwoVCollision=new pc.Vec3(0,.06,0),this.platTwoLCollision=new pc.Vec3(-.12,0,0),this.platTwoRCollision=new pc.Vec3(.12,0,0),this.platThreeVCollision=new pc.Vec3(0,.04,0),this.platThreeLCollision=new pc.Vec3(-.18,0,0),this.platThreeRCollision=new pc.Vec3(.18,0,0),this.killPlatformHeight=this.app.root.findByName("killPlane").getPosition().y,this.platformObjectTracker=[],this.platformObjectTracker.push(this.createPlatformEntity("platform2")),this.platformObjectTracker[0].platformEntity.setPosition(0,-.55,0),this.platformObjectTracker.push(this.createPlatformEntity("platform1",!0,!1)),this.platformObjectTracker[1].platformEntity.setPosition(-.7,.5,0),this.platformObjectTracker.push(this.createPlatformEntity("platform3",!1,!0)),this.platformObjectTracker[2].platformEntity.setPosition(.7,1.5,0),this.tweenLength=.8,this.tweenAlpha=0,this.wasSpikeLastPlatform=!1,this.wasTrampLastPlatform=!1,this.nextSpawnValue=30,this.pointCounterToNextSpawn=20,this.app.on("jump",this.tweenPlatforms,this),this.app.on("reset",this.resetPlatforms,this)},PlatformManager.prototype.tweenPlatforms=function(t,e){this.tweenAlpha=0;var o=this;let a=t.getPosition().y-this.app.root.findByName("lowerBound").getPosition().y;if(e&&(a=2.5),a>0)for(let t=this.platformObjectTracker.length-1;t>=0;t--){let e=this.platformObjectTracker[t].platformEntity.getPosition(),r=new pc.Vec3(e.x,e.y-a,e.z);if(null!=this.platformObjectTracker[t].platformTween&&this.platformObjectTracker[t].platformTween.stop(),o.platformObjectTracker[t].platformEntity.getPosition().y<=o.killPlatformHeight&&0!=t)o.platformObjectTracker[t].platformEntity.destroy(),o.platformObjectTracker[t].platformEntity=null,o.platformObjectTracker[t].platformTween=null,o.platformObjectTracker.splice(t,1);else if(0===t){var i=0;this.platformObjectTracker[t].platformTween=this.platformObjectTracker[t].platformEntity.tween(this.platformObjectTracker[t].platformEntity.getLocalPosition()).to(r,this.tweenLength,pc.QuadraticOut).delay(0).loop(!1).yoyo(!1).onUpdate((function(t){let e=t*a*100;o.pointCounterToNextSpawn+=e,o.app.fire("addToScore",e),o.pointCounterToNextSpawn>=o.nextSpawnValue&&(o.pointCounterToNextSpawn=0,o.spawnPlatform(a)),i+=t,o.tweenAlpha=i/o.tweenLength})).onComplete((function(){o.platformObjectTracker[t].platformEntity.getPosition().y<=o.killPlatformHeight&&(o.platformObjectTracker[t].platformEntity.destroy(),o.platformObjectTracker[t].platformEntity=null,o.platformObjectTracker[t].platformTween=null,o.platformObjectTracker.splice(t,1))})),this.platformObjectTracker[t].platformTween.start()}else this.platformObjectTracker[t].platformTween=this.platformObjectTracker[t].platformEntity.tween(this.platformObjectTracker[t].platformEntity.getLocalPosition()).to(r,this.tweenLength,pc.QuadraticOut).delay(0).loop(!1).yoyo(!1),this.platformObjectTracker[t].platformTween.start()}},PlatformManager.prototype.createPlatformEntity=function(t,e,o){let a={platformEntity:void 0,platformTween:void 0},i=new pc.Entity;i.tags.add("platform"),i.setLocalScale(1.5,1.5,1.5);var r=new pc.Entity,l=new pc.Entity,n=new pc.Entity,p=new pc.Entity,s=new pc.Entity;i.addChild(r),i.children[0].addChild(l),i.children[0].addChild(n),i.children[0].addChild(p),i.children[0].addChild(s),i.addComponent("sprite",{type:pc.SPRITETYPE_SIMPLE,spriteAsset:this.app.assets.find(t)}),"platform1"===t?(r.setLocalPosition(this.platOneVCollision),l.setLocalPosition(this.platOneLCollision),n.setLocalPosition(this.platOneRCollision)):"platform2"===t?(r.setLocalPosition(this.platTwoVCollision),l.setLocalPosition(this.platTwoLCollision),n.setLocalPosition(this.platTwoRCollision)):"platform3"===t&&(r.setLocalPosition(this.platThreeVCollision),l.setLocalPosition(this.platThreeLCollision),n.setLocalPosition(this.platThreeRCollision));let c=l.getLocalPosition().x+.04,m=n.getLocalPosition().x-.04,f=new pc.Vec3(this.randomFloatFromInterval(c,m),0,0);if(!0===this.wasSpikeLastPlatform)this.wasSpikeLastPlatform=!1;else if(!0===e){this.wasSpikeLastPlatform=!0,p.tags.add("spike"),p.setLocalPosition(f);let t=new pc.Entity,e=new pc.Entity,o=new pc.Entity;p.addChild(t),p.children[0].addChild(e),p.children[0].addChild(o),t.setLocalPosition(0,.032,0),e.setLocalPosition(-.06,0,0),o.setLocalPosition(.06,0,0),p.addComponent("script"),p.script.create("collision"),p.addComponent("sprite",{type:pc.SPRITETYPE_ANIMATED,autoPlayClip:"spikeSparkle"}),p.sprite.addClip(new pc.SpriteAnimationClip(p.sprite,{name:"spikeSparkle",fps:10,loop:!0,spriteAsset:this.app.assets.find("spike","sprite")}))}if(!0===this.wasTrampLastPlatform)this.wasTrampLastPlatform=!1;else if(!0===o){this.wasTrampLastPlatform=!0,s.tags.add("trampoline"),s.setLocalPosition(f);let t=new pc.Entity,e=new pc.Entity,o=new pc.Entity;s.addChild(t),s.children[0].addChild(e),s.children[0].addChild(o),t.setLocalPosition(0,.09,0),e.setLocalPosition(-.05,0,0),o.setLocalPosition(.05,0,0),s.addComponent("script"),s.script.create("collision"),s.script.create("trampolineAnim"),s.addComponent("sprite",{type:pc.SPRITETYPE_ANIMATED,autoPlayClip:"trampolineIdle"}),s.sprite.addClip(new pc.SpriteAnimationClip(s.sprite,{name:"trampolineIdle",fps:10,loop:!0,spriteAsset:this.app.assets.find("trampolineIdle")})),s.sprite.addClip(new pc.SpriteAnimationClip(s.sprite,{name:"trampolineJump",fps:10,loop:!0,spriteAsset:this.app.assets.find("trampolineJump")}))}return i.addComponent("script"),i.script.create("collision"),this.entity.addChild(i),a.platformEntity=i,a},PlatformManager.prototype.spawnPlatform=function(t){this.nextSpawnValue=this.randomFloatFromInterval(30,65);var e="platform",o=(Math.floor(3*Math.random())+1).toString();e=e.concat(o);let a=Math.random()<.25,i=Math.random()>.75;!0===i&&(a=!1);var r=this.createPlatformEntity(e,a,i);let l=this.app.root.findByName("platformSpawnHeight").getPosition();l.x=this.randomFloatFromInterval(-1,1),r.platformEntity.setPosition(l);var n=pc.math.clamp(1-this.tweenAlpha,0,1);let p=new pc.Vec3(l.x,l.y-t*n,l.z);var s=this.tweenLength*n;r.platformEntity.getLocalPosition().clone().y,p.y;r.platformTween=r.platformEntity.tween(r.platformEntity.getLocalPosition()).to(p,s,pc.QuadraticOut).delay(0).loop(!1).yoyo(!1).start(),this.platformObjectTracker.push(r)},PlatformManager.prototype.resetPlatforms=function(){for(let t=this.platformObjectTracker.length-1;t>=0;t--)this.platformObjectTracker[t].platformEntity.destroy(),this.platformObjectTracker[t].platformEntity=null,this.platformObjectTracker[t].platformTween=null;this.platformObjectTracker=[],this.platformObjectTracker.push(this.createPlatformEntity("platform2")),this.platformObjectTracker[0].platformEntity.setPosition(0,-.55,0),this.platformObjectTracker.push(this.createPlatformEntity("platform1",!0,!1)),this.platformObjectTracker[1].platformEntity.setPosition(-.7,.5,0),this.platformObjectTracker.push(this.createPlatformEntity("platform3",!1,!0)),this.platformObjectTracker[2].platformEntity.setPosition(.7,1.5,0),this.wasSpikeLastPlatform=!1,this.wasTrampLastPlatform=!1,this.nextSpawnValue=30,this.pointCounterToNextSpawn=20},PlatformManager.prototype.randomFloatFromInterval=function(t,e){return Math.random()*(e-t)+t};var Collision=pc.createScript("collision");Collision.prototype.initialize=function(){this.isPlayerFalling=!0,this.LPlayerCollision=this.app.root.findByName("lPlayerCollision").getPosition().x,this.RPlayerCollision=this.app.root.findByName("rPlayerCollision").getPosition().x,this.verticalPlayerCollision=this.app.root.findByName("verticalPlayerCollision").getPosition().y,this.singleFireTimerMax=.5,this.singleFireTimer=this.singleFireTimerMax,this.app.on("notFalling",(function(){this.isPlayerFalling=!1}),this),this.app.on("falling",(function(){this.isPlayerFalling=!0}),this)},Collision.prototype.update=function(i){if(this.verticalPlayerCollision=this.app.root.findByName("verticalPlayerCollision").getPosition().y,Math.abs(this.verticalPlayerCollision-this.entity.children[0].getPosition().y)<.075){this.LPlayerCollision=this.app.root.findByName("lPlayerCollision").getPosition().x,this.RPlayerCollision=this.app.root.findByName("rPlayerCollision").getPosition().x;var t=this.entity.children[0].children[0].getPosition().x,l=this.entity.children[0].children[1].getPosition().x;(this.LPlayerCollision>t&&this.LPlayerCollision<l||this.RPlayerCollision>t&&this.RPlayerCollision<l||this.LPlayerCollision<t&&this.RPlayerCollision>l)&&!0===this.isPlayerFalling&&this.singleFireTimer>=this.singleFireTimerMax&&(this.entity.tags.has("spike")?(this.app.fire("spikeHit"),this.app.fire("notFalling"),this.singleFireTimer=0):this.entity.tags.has("trampoline")?(this.app.fire("jump",this.entity,!0),this.app.fire("notFalling"),this.singleFireTimer=0):this.entity.tags.has("platform")&&(this.app.fire("jump",this.entity,!1),this.app.fire("notFalling"),this.singleFireTimer=0))}this.singleFireTimer<this.singleFireTimerMax&&(this.singleFireTimer+=i)};var TrampolineAnim=pc.createScript("trampolineAnim");TrampolineAnim.prototype.initialize=function(){var t=this;this.entity.sprite.speed=1,this.app.on("jump",(function(i){t.entity===i&&null!=t.entity&&null!=t.entity.sprite&&(t.entity.sprite.play("trampolineJump"),t.entity.sprite.frame=0)}),this)},TrampolineAnim.prototype.update=function(t){6===this.entity.sprite.clip("trampolineJump").frame&&this.entity.sprite.play("trampolineIdle")};var ScoringSystem=pc.createScript("scoringSystem");ScoringSystem.prototype.initialize=function(){this.score=0,this.highScore=0,this.hasWonAlready=!1,this.zero=this.app.assets.find("0"),this.one=this.app.assets.find("1"),this.two=this.app.assets.find("2"),this.three=this.app.assets.find("3"),this.four=this.app.assets.find("4"),this.five=this.app.assets.find("5"),this.six=this.app.assets.find("6"),this.seven=this.app.assets.find("7"),this.eight=this.app.assets.find("8"),this.nine=this.app.assets.find("9"),this.app.on("addToScore",(function(s){this.score=this.score+s,this.score>999998&&(this.score=999999),this.score>this.highScore&&(this.highScore=this.score)}),this),this.app.on("dead",(function(){this.app.fire("updateEndGameScores",this.score,this.highScore)}),this),this.app.on("reset",(function(){this.score=0,this.hasWonAlready=!1;for(let s=0;s<this.entity.children.length;s++)this.entity.children[s].element.spriteAsset=this.zero}),this)},ScoringSystem.prototype.update=function(s){var t=Math.floor(this.score).toString();t=t.split("").reverse().join("");for(let s=0;s<t.length;s++)this.entity.children[s].element.spriteAsset=this.app.assets.find(t.charAt(s));this.score>=1e3&&!1===this.hasWonAlready&&(this.hasWonAlready=!0,this.app.fire("win"))};var LeftRightGroup=pc.createScript("leftRightGroup");LeftRightGroup.prototype.initialize=function(){var t=this;this.entity.enabled=!0,this.initialPos=new pc.Vec3(1e3,0,0),this.offScreenPos=new pc.Vec3(-1e3,0,0),this.onScreenPos=new pc.Vec3(0,0,0),this.entity.setLocalPosition(this.initialPos),this.app.on("dead",(function(){t.offofScreenL()}),this),this.app.on("startButton",(function(){t.ontoScreen()}),this),this.app.on("reset",(function(){t.ontoScreen()}),this)},LeftRightGroup.prototype.ontoScreen=function(){let t=this;this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.onScreenPos,.8,pc.QuadraticOut).delay(.5).loop(!1).yoyo(!1).onComplete((function(){t.app.fire("movementButtonsActive")}),this).start()},LeftRightGroup.prototype.offofScreenL=function(){this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.offScreenPos,.8,pc.QuadraticIn).delay(0).loop(!1).yoyo(!1).start()};var StartGroup=pc.createScript("startGroup");StartGroup.prototype.initialize=function(){var t=this;this.entity.enabled=!0,this.offScreenPos=new pc.Vec3(-1e3,0,0),this.onScreenPos=new pc.Vec3(0,0,0),this.entity.setLocalPosition(this.onScreenPos),this.app.once("startButton",(function(){t.offofScreenL()}),this),this.app.once("dead",(function(){t.offofScreenL()}),this)},StartGroup.prototype.offofScreenL=function(){var t=this;this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.offScreenPos,.8,pc.QuadraticIn).delay(0).loop(!1).yoyo(!1).onComplete((function(){t.entity.destroy()})).start()};var LoseGroup=pc.createScript("loseGroup");LoseGroup.prototype.initialize=function(){var t=this;this.entity.enabled=!0,this.offScreenPos=new pc.Vec3(1e3,0,0),this.onScreenPos=new pc.Vec3(0,0,0),this.entity.children[0].button.active=!1,this.entity.children[1].button.active=!1,this.entity.children[2].button.active=!1,this.entity.children[0].enabled=!0,this.entity.children[1].enabled=!1,this.entity.children[2].enabled=!1,this.entity.setLocalPosition(this.offScreenPos),this.app.on("dead",(function(){t.ontoScreen()}),this),this.app.on("win",(function(){t.entity.children[0].enabled=!1,t.entity.children[1].enabled=!0,t.entity.children[2].enabled=!0}),this),this.app.on("reset",(function(){t.offofScreenR()}),this)},LoseGroup.prototype.ontoScreen=function(){this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.onScreenPos,.8,pc.QuadraticOut).delay(.5).loop(!1).yoyo(!1).onComplete((function(){this.entity.children[0].button.active=!0,this.entity.children[1].button.active=!0,this.entity.children[2].button.active=!0})).start()},LoseGroup.prototype.offofScreenR=function(){this.entity.children[0].button.active=!1,this.entity.children[1].button.active=!1,this.entity.children[2].button.active=!1,this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.offScreenPos,.8,pc.QuadraticIn).delay(0).loop(!1).yoyo(!1).onComplete((function(){this.entity.children[0].enabled=!0,this.entity.children[1].enabled=!1,this.entity.children[2].enabled=!1})).start()};var ResetButton=pc.createScript("resetButton");ResetButton.prototype.initialize=function(){this.entity.button.active=!1,this.entity.button.on("pressedend",(function(){this.entity.button.active=!1,this.app.fire("reset")}),this)};var IOspressFix=pc.createScript("iOspressFix");IOspressFix.prototype.initialize=function(){document.body.style["-webkit-user-select"]="none"};var CouponNotification=pc.createScript("couponNotification");CouponNotification.prototype.initialize=function(){var t=this;this.entity.enabled=!0,this.offScreenPos=new pc.Vec3(0,100,0),this.onScreenPos=new pc.Vec3(0,0,0),this.entity.setLocalPosition(this.offScreenPos),this.app.on("win",(function(){t.couponNotifAnimation()}),this)},CouponNotification.prototype.couponNotifAnimation=function(){var t=this;this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.onScreenPos,.3,pc.QuadraticOut).delay(.5).loop(!1).yoyo(!1).onComplete((function(){t.tween=t.entity.tween(t.entity.getLocalPosition()).to(t.offScreenPos,.3,pc.QuadraticIn).delay(6).loop(!1).yoyo(!1).start()}),this).start()};var DeathScreenDropDown=pc.createScript("deathScreenDropDown");DeathScreenDropDown.prototype.initialize=function(){var t=this.app.root.findByName("youWin"),e=this.app.root.findByName("youLose"),o=!1;this.app.on("win",(function(){o=!0}),this),this.entity.enabled=!0,this.offScreenPos=new pc.Vec3(0,1300,0),this.onScreenPos=new pc.Vec3(0,0,0),this.entity.setLocalPosition(this.offScreenPos),this.app.on("dead",(function(){o?(t.enabled=!0,e.enabled=!1):(t.enabled=!1,e.enabled=!0),this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.onScreenPos,.8,pc.QuadraticOut).delay(0).loop(!1).yoyo(!1).start()}),this),this.app.on("reset",(function(){o=!1,this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.offScreenPos,.8,pc.QuadraticIn).delay(0).loop(!1).yoyo(!1).start()}),this)};var StartButton=pc.createScript("startButton");StartButton.prototype.initialize=function(){this.entity.button.on("pressedend",(function(){this.entity.button.active=!1,this.app.fire("startButton")}),this)};var EndScreenScore=pc.createScript("endScreenScore");EndScreenScore.prototype.initialize=function(){this.app.on("updateEndGameScores",(function(e,t){for(let e=0;e<this.entity.children.length;e++)this.entity.children[e].element.spriteAsset=this.app.assets.find("0");var i=Math.floor(e).toString();i=i.split("").reverse().join("");for(let e=0;e<i.length;e++)this.entity.children[e].element.spriteAsset=this.app.assets.find(i.charAt(e))}),this)};var EndScreenHighScore=pc.createScript("endScreenHighScore");EndScreenHighScore.prototype.initialize=function(){this.app.on("updateEndGameScores",(function(e,t){for(let e=0;e<this.entity.children.length;e++)this.entity.children[e].element.spriteAsset=this.app.assets.find("0");var i=Math.floor(t).toString();i=i.split("").reverse().join("");for(let e=0;e<i.length;e++)this.entity.children[e].element.spriteAsset=this.app.assets.find(i.charAt(e))}),this)};var ClaimButton=pc.createScript("claimButton");ClaimButton.prototype.initialize=function(){this.entity.button.on("pressedend",(function(){console.log("Prize Claim Press")}),this)};!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("playcanvas")):"function"==typeof define&&define.amd?define(["playcanvas"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).pc)}(this,(function(t){"use strict";const Linear=function(t){return t},BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},BounceIn=function(t){return 1-BounceOut(1-t)};var e=Object.freeze({__proto__:null,BackIn:function(t){const e=1.70158;return t*t*((e+1)*t-e)},BackInOut:function(t){const e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},BackOut:function(t){const e=1.70158;return--t*t*((e+1)*t+e)+1},BounceIn:BounceIn,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},BounceOut:BounceOut,CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CubicIn:function(t){return t*t*t},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},CubicOut:function(t){return--t*t*t+1},ElasticIn:function(t){let e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},ElasticInOut:function(t){const e=.4;let i,s=.1;return 0===t?0:1===t?1:(!s||s<1?(s=1,i=.1):i=e*Math.asin(1/s)/(2*Math.PI),(t*=2)<1?s*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/e)*-.5:s*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/e)*.5+1)},ElasticOut:function(t){let e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},Linear:Linear,QuadraticIn:function(t){return t*t},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},QuadraticOut:function(t){return t*(2-t)},QuarticIn:function(t){return t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuarticOut:function(t){return 1- --t*t*t*t},QuinticIn:function(t){return t*t*t*t*t},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},QuinticOut:function(t){return--t*t*t*t*t+1},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}});class TweenManager{_tweens=[];_add=[];add(t){return this._add.push(t),t}update(t){let e=0,i=this._tweens.length;for(;e<i;)this._tweens[e].update(t)?e++:(this._tweens.splice(e,1),i--);if(this._add.length){for(let t=0;t<this._add.length;t++)this._tweens.indexOf(this._add[t])>-1||this._tweens.push(this._add[t]);this._add.length=0}}}class Tween extends t.EventHandler{constructor(e,i,s){super(),this.manager=i,s&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=e,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new t.Quat,this._toQuat=new t.Quat,this._quat=new t.Quat,this.easing=Linear,this._sv={},this._ev={}}_parseProperties(e){let i;return e instanceof t.Vec2?i={x:e.x,y:e.y}:e instanceof t.Vec3?i={x:e.x,y:e.y,z:e.z}:e instanceof t.Vec4||e instanceof t.Quat?i={x:e.x,y:e.y,z:e.z,w:e.w}:e instanceof t.Color?(i={r:e.r,g:e.g,b:e.b},void 0!==e.a&&(i.a=e.a)):i=e,i}to(t,e,i,s,n,r){return this._properties=this._parseProperties(t),this.duration=e,i&&(this.easing=i),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this}from(t,e,i,s,n,r){return this._properties=this._parseProperties(t),this.duration=e,i&&(this.easing=i),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._from=!0,this}rotate(t,e,i,s,n,r){return this._properties=this._parseProperties(t),this.duration=e,i&&(this.easing=i),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._slerp=!0,this}start(){let t,e,i,s;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),e=void 0!==this._properties.x?this._properties.x:this.target.x,i=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(e,i,s))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(e=void 0!==this._properties.x?this._properties.x:this.target.x,i=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z,void 0!==this._properties.w?(this._fromQuat.copy(this.target),this._toQuat.set(e,i,s,this._properties.w)):(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),this._toQuat.setFromEulerAngles(e,i,s)))}return this._currentDelay=this._delay,this.manager.add(this),this}pause(){this.playing=!1}resume(){this.playing=!0}stop(){this.playing=!1,this.stopped=!0}delay(t){return this._delay=t,this.pending=!0,this}repeat(t,e){return this._count=0,this._numRepeats=t,this._repeatDelay=e||0,this}loop(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this}yoyo(t){return this._yoyo=t,this}reverse(){return this._reverse=!this._reverse,this}chain(){let t=arguments.length;for(;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this}onUpdate(t){return this.on("update",t),this}onComplete(t){return this.on("complete",t),this}onLoop(t){return this.on("loop",t),this}update(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}let e=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(e=this.duration-this.time,this.time=0):(e=this.time-this.duration,this.time=this.duration));const i=0===this.duration?1:this.time/this.duration,s=this.easing(i);let n,r;for(const t in this._properties)this._properties.hasOwnProperty(t)&&(n=this._sv[t],r=this._ev[t],this.target[t]=n+(r-n)*s);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,s),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){const t=this._repeat(e);return t?this.fire("loop"):(this.fire("complete",e),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),t}return!0}_repeat(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(const t in this._properties){const e=this._sv[t];this._sv[t]=this._ev[t],this._ev[t]=e}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}}const i=new Map,getTweenManager=e=>{if(!(e&&e instanceof t.AppBase))throw new Error("`getTweenManager` expects an instance of `AppBase`");if(!i.has(e)){const t=new TweenManager;i.set(e,t),e.on("update",(e=>{t.update(e)})),e.on("destroy",(()=>i.delete(e)))}return i.get(e)};if(!globalThis.pc)throw new Error("There is no global `pc` playcanvas object.");Object.assign(globalThis.pc,e),(({AppBase:t,Entity:e})=>{if(!t)throw new Error("The param `addExtensions` must contain the `AppBase` class. `addExtensions({ AppBase })`");if(!e)throw new Error("The param `addExtensions` must contain the `Entity` class. `addExtensions({ Entity })`");t.prototype.tween=function(t){const e=getTweenManager(this);return new Tween(t,e)},e.prototype.tween=function(t,e){return((t,e,i)=>{const s=getTweenManager(t._app),n=new Tween(e,s);return n.entity=t,t.once("destroy",n.stop,n),i&&i.element&&(n.element=i.element),n})(this,t,e)}})(globalThis.pc),globalThis.pc.AppBase.prototype.addTweenManager=function(){this._tweenManager=getTweenManager(this)}}));