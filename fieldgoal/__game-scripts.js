var ScreenCoordinateFlick=pc.createScript("screenCoordinateFlick");ScreenCoordinateFlick.prototype.initialize=function(){this.flickStartX=0,this.flickStartY=0,this.flickEndX=void 0,this.flickEndY=void 0,this.flickDistanceX=void 0,this.flickDistanceY=void 0,this.firstMove=!0;var t=this;this.isFootballButtonPressed=!1,this.isFlickEnabled=!0,this.isGameOn=!0,this.frameCount=0,this.app.on("disableFlick",this.disableFlick,this),this.app.on("enableFlick",this.enableFlick,this),this.app.on("2DFootballButtonPressed",this.onFlickStart,this),this.app.on("playerHasWon",(function(){t.isGameOn=!1}),this),this.app.on("playerHasLost",(function(){t.isGameOn=!1}),this),this.app.on("resetGame",(function(){t.isGameOn=!0}),this);var i=this.app.touch;i&&(i.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),i.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),i.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this))},ScreenCoordinateFlick.prototype.disableFlick=function(t){this.isFlickEnabled=!1,this.isFootballButtonPressed=!1},ScreenCoordinateFlick.prototype.enableFlick=function(t){this.isFlickEnabled=!0},ScreenCoordinateFlick.prototype.onFlickStart=function(t){this.isFlickEnabled&&(this.isFootballButtonPressed=!0)},ScreenCoordinateFlick.prototype.update=function(t){!0===this.isFootballButtonPressed&&(this.frameCount+=1)},ScreenCoordinateFlick.prototype.onTouchStart=function(t){this.isFootballButtonPressed&&(this.flickStartX=0,this.flickStartY=0,this.flickEndX=0,this.flickEndY=0,this.flickDistanceX=0,this.flickDistanceY=0,this.frameCount=0,this.firstMove=!0)},ScreenCoordinateFlick.prototype.onTouchMove=function(t){this.isFootballButtonPressed&&(!0===this.firstMove&&(this.flickStartX=t.touches[0].x,this.flickStartY=t.touches[0].y,this.firstMove=!1),this.flickEndX=t.touches[0].x,this.flickEndY=t.touches[0].y)},ScreenCoordinateFlick.prototype.onTouchEnd=function(t){this.isFootballButtonPressed&&(this.flickDistanceX=this.flickEndX-this.flickStartX,this.flickDistanceY=this.flickStartY-this.flickEndY,this.flickDistanceY>40&&this.frameCount<45&&!0===this.isGameOn&&this.app.fire("successfulFlick",this.flickDistanceX,this.flickDistanceY,this.frameCount),this.isFootballButtonPressed=!1,this.frameCount=0)};var FootballButton=pc.createScript("footballButton");FootballButton.prototype.initialize=function(){this.entity.enabled=!0,this.entity.button.active=!0,this.entity.button.on("touchstart",(function(){this.app.fire("2DFootballButtonPressed")}),this),this.app.on("startGame",(function(){this.entity.button.active=!0}),this),this.app.on("playerHasWon",(function(){this.entity.button.active=!1}),this),this.app.on("playerHasLost",(function(){this.entity.button.active=!1}),this),this.app.on("resetGame",(function(){this.entity.button.active=!0}),this)};var BallLaunchPhysics=pc.createScript("ballLaunchPhysics");BallLaunchPhysics.prototype.initialize=function(){var t=this;this.launchPos=this.entity.getLocalPosition().clone(),this.launchRot=this.entity.getLocalEulerAngles().clone(),this.ballInFlight=!1,this.flickAngle=0,this.maxFrames=45,this.maxPower=40,this.app.on("successfulFlick",this.launchAttempt,this),this.app.on("ballHitGround",this.reset,this),this.horizontalBallLaunchTween=void 0,this.rotationalSpeed=10,this.app.on("collision",(function(){t.horizontalBallLaunchTween.stop(),t.rotationalSpeed=-1*t.rotationalSpeed}),this),this.app.on("updateMaxPower",(function(i){t.maxPower=i}),this)},BallLaunchPhysics.prototype.launchAttempt=function(t,i,l){let h=0,s=0;if(!1===this.ballInFlight&&(this.entity.setLocalPosition(this.launchPos),this.entity.setEulerAngles(this.launchRot),this.flickAngle=Math.atan(i/t),this.flickAngle=this.flickAngle*(180/Math.PI),this.flickAngle<0&&(this.flickAngle=180+this.flickAngle),force=this.maxPower*(1-l/this.maxFrames),h=force*Math.cos(this.flickAngle*(Math.PI/180)),s=force*Math.sin(this.flickAngle*(Math.PI/180)),this.flickAngle>45&&this.flickAngle<135)){this.app.fire("launchFootball"),this.ballInFlight=!0;var n=this.entity.getLocalPosition().clone();n.x=n.x+h,n.z=n.z-s,this.horizontalBallLaunchTween=this.entity.tween(this.entity.getLocalPosition()).to(n,2,pc.Linear).delay(0).loop(!1).yoyo(!1),this.horizontalBallLaunchTween.start()}},BallLaunchPhysics.prototype.update=function(t){this.ballInFlight&&this.entity.rotate(this.rotationalSpeed,0,0)},BallLaunchPhysics.prototype.reset=function(){this.horizontalBallLaunchTween.stop(),this.rotationalSpeed=Math.abs(this.rotationalSpeed),this.entity.setLocalPosition(this.launchPos),this.entity.setEulerAngles(this.launchRot),this.ballInFlight=!1};pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);this._add.length&&(this._tweens=this._tweens.concat(this._add),this._add.length=0)}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},_parseProperties=function(t){var i;return t instanceof pc.Vec2?i={x:t.x,y:t.y}:t instanceof pc.Vec3?i={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?i={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(i={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(i.a=t.a)):i=t,i};Tween.prototype={to:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this},from:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var t,i,e,n;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(i,e,n))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._toQuat.setFromEulerAngles(i,e,n))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time=this.time-this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,n,s=0===this.duration?1:this.time/this.duration,r=this.easing(s);for(var h in this._properties)this._properties.hasOwnProperty(h)&&(e=this._sv[h],n=this._ev[h],this.target[h]=e+(n-e)*r);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties){var e=this._sv[i];this._sv[i]=this._ev[i],this._ev[i]=e}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceIn=function(t){return 1-BounceOut(1-t)},BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,n=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=n*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*.5+1)}}}()),function(){pc.Application.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",(function(t){this._tweenManager.update(t)}))},pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.once("destroy",e.stop,e),i&&i.element&&(e.element=i.element),e};var t=pc.Application.getApplication();t&&t.addTweenManager()}();var FlagRotUpdate=pc.createScript("flagRotUpdate");FlagRotUpdate.prototype.initialize=function(){this.app.on("updateWind",(function(t){var e=new pc.Vec4(0,0,0,0);e=t<0?new pc.Vec4(0,0,-.9938887,-.1103872):new pc.Vec4(0,0,0,0),this.tween&&this.tween.stop(),this.tween=this.entity.tween(this.entity.getLocalRotation()).to(e,.8,pc.QuadraticOut).delay(0).loop(!1).yoyo(!1),this.tween.start()}),this)};var FlagAnimationBlending=pc.createScript("flagAnimationBlending");FlagAnimationBlending.states={idle:{animation:"flagAtRest.glb"},flap:{animation:"flagWave.glb"}},FlagAnimationBlending.prototype.initialize=function(){this.blendTime=.5,this.setState("idle"),this.app.on("updateWind",(function(t){0===t?(this.entity.animation.speed=1,this.setState("idle")):t>8?(this.entity.animation.speed=2,this.setState("flap")):(this.entity.animation.speed=1,this.setState("flap"))}),this)},FlagAnimationBlending.prototype.setState=function(t){var i=FlagAnimationBlending.states;this.state=t,this.entity.animation.play(i[t].animation,this.blendTime)};var FootballYtween=pc.createScript("footballYtween");FootballYtween.prototype.initialize=function(){this.entity.setLocalPosition(new pc.Vec3(0,0,0)),this.targetPosition=new pc.Vec3(0,0,0),this.timerForReset=2,this.time=1,this.tweenUp=void 0,this.tweenDown=void 0,this.app.on("launchFootball",this.launchFootball,this),this.app.on("ballHitGround",this.reset,this),this.app.on("collision",this.collision,this)},FootballYtween.prototype.update=function(t){this.entity.getPosition().y<-1&&this.timerForReset>=2&&(this.timerForReset=0,this.tweenDown&&this.tweenDown.stop(),this.app.fire("ballHitGround")),this.timerForReset<2&&(this.timerForReset+=t)},FootballYtween.prototype.launchFootball=function(){this.entity.setLocalPosition(new pc.Vec3(0,0,0)),this.targetPosition=new pc.Vec3(0,0,0);var t=2*Math.random()+3,e=this;this.targetPosition.y+=t,this.tweenUp=this.entity.tween(this.entity.getLocalPosition()).to(this.targetPosition,.9*this.time,pc.QuadraticOut).delay(0).loop(!1).yoyo(!1),this.tweenUp.start(),this.tweenUp.on("complete",(function(){e.tweenDown=this.entity.tween(this.entity.getLocalPosition()).to(new pc.Vec3(0,-10,0),1.1*this.time,pc.QuadraticIn).delay(0).loop(!1).yoyo(!1),e.tweenDown.start()}))},FootballYtween.prototype.collision=function(){this.tweenDown&&this.tweenDown.stop(),this.tweenUp&&this.tweenUp.stop(),this.tweenDown=this.entity.tween(this.entity.getLocalPosition()).to(new pc.Vec3(0,-10,0),.8,pc.QuadraticIn).delay(0).loop(!1).yoyo(!1),this.tweenDown.start()},FootballYtween.prototype.reset=function(){this.tweenDown&&this.tweenDown.stop(),this.tweenUp&&this.tweenUp.stop(),this.entity.setLocalPosition(0,0,0)};var BallCollision=pc.createScript("ballCollision");BallCollision.prototype.initialize=function(){this.LBarBottomPos=this.app.root.findByName("L_barBottom").getLocalPosition().clone(),this.LBarTopPos=this.app.root.findByName("L_barTop").getLocalPosition().clone(),this.RBarBottomPos=this.app.root.findByName("R_barBottom").getLocalPosition().clone(),this.RBarTopPos=this.app.root.findByName("R_barTop").getLocalPosition().clone(),this.postFrontPos=this.app.root.findByName("postFront").getLocalPosition().clone(),this.BLWinPos=this.app.root.findByName("BL_winCollision").getLocalPosition().clone(),this.BRWinPos=this.app.root.findByName("BR_winCollision").getLocalPosition().clone(),this.RRefPos=this.app.root.findByName("R_RefCollision").getLocalPosition().clone(),this.LRefPos=this.app.root.findByName("L_RefCollision").getLocalPosition().clone(),this.RNetPos=this.app.root.findByName("R_net").getPosition().clone(),this.LNetPos=this.app.root.findByName("L_net").getPosition().clone(),this.ballPos=new pc.Vec3(0,0,0),this.timerForReset=1,this.timerForNetReset=1},BallCollision.prototype.update=function(t){this.ballPos=this.entity.getPosition().clone(),this.timerForReset>=1&&(this.ballPos.z-this.postFrontPos.z<1&&this.ballPos.z-this.postFrontPos.z>.25&&((Math.abs(this.ballPos.x-this.LBarBottomPos.x)<.35||Math.abs(this.ballPos.x-this.RBarBottomPos.x)<.35)&&this.ballPos.y<=this.LBarTopPos.y&&this.ballPos.y<=this.RBarTopPos.y&&this.ballPos.y>=this.LBarBottomPos.y&&this.ballPos.y>=this.RBarBottomPos.y&&(this.timerForReset=0,this.app.fire("collision")),(Math.abs(this.ballPos.y-this.postFrontPos.y)<.25||Math.abs(this.ballPos.y-this.postFrontPos.y)<.25)&&this.ballPos.x>=this.LBarBottomPos.x&&this.ballPos.x<=this.RBarBottomPos.x&&(this.timerForReset=0,this.app.fire("collision"))),this.ballPos.z-this.BLWinPos.z<.5&&this.ballPos.z-this.BLWinPos.z>=-.5&&this.ballPos.x>=this.BLWinPos.x&&this.ballPos.x<=this.BRWinPos.x&&this.ballPos.y>=this.BLWinPos.y&&this.ballPos.y>=this.BRWinPos.y&&this.timerForReset>=1&&(this.timerForReset=0,this.app.fire("successfulFieldGoal")),Math.abs(this.ballPos.z-this.RRefPos.z)<.7&&Math.abs(this.ballPos.y-this.RRefPos.y)<2&&(Math.abs(this.ballPos.x-this.RRefPos.x)<.5&&this.timerForReset>=1?(this.timerForReset=0,this.app.fire("collision"),this.app.fire("refHit",this.app.root.findByName("RRef"))):Math.abs(this.ballPos.x-this.LRefPos.x)<.5&&this.timerForReset>=1&&(this.timerForReset=0,this.app.fire("collision"),this.app.fire("refHit",this.app.root.findByName("LRef"))))),this.timerForNetReset>=1&&this.ballPos.z-this.LNetPos.z<.5&&this.ballPos.z-this.LNetPos.z>=-.5&&this.ballPos.x>=this.LNetPos.x&&this.ballPos.x<=this.RNetPos.x&&this.ballPos.y>=this.LNetPos.y&&this.ballPos.y>=this.RNetPos.y&&(this.app.fire("netCollision"),this.app.fire("collision"),this.timerForNetReset=0),this.timerForReset<1&&(this.timerForReset+=t),this.timerForNetReset<1&&(this.timerForNetReset+=t)};var WindPhysics=pc.createScript("windPhysics");WindPhysics.prototype.initialize=function(){var i=this;this.windForce=0,this.tweenTime=2.4,this.targetPosition=new pc.Vec3(0,0,0),this.startingPos=this.entity.getLocalPosition().clone(),this.windTween=void 0,this.app.on("launchFootball",this.applyWind,this),this.app.on("updateWind",(function(t){i.windForce=t}),this),this.app.on("ballHitGround",this.reset,this)},WindPhysics.prototype.applyWind=function(){this.windTween&&this.windTween.stop(),this.targetPosition.x=this.windForce,this.windTween=this.entity.tween(this.entity.getLocalPosition()).to(this.targetPosition,this.tweenTime,pc.QuadraticIn).start()},WindPhysics.prototype.reset=function(){this.windTween&&this.windTween.stop(),this.entity.setLocalPosition(this.startingPos)};var RefereeAnimationBlending=pc.createScript("refereeAnimationBlending");RefereeAnimationBlending.states={idle:{animation:"idle.glb"},fieldGoal:{animation:"fieldGoal.glb"},gettingHit:{animation:"hit.glb"}},RefereeAnimationBlending.prototype.initialize=function(){this.blendTime=0,this.setState("idle"),this.app.on("successfulFieldGoal",this.fieldGoal,this),this.app.on("refHit",this.gettingHit,this)},RefereeAnimationBlending.prototype.update=function(t){this.entity.animation.currentTime+.05>=this.entity.animation.duration&&("fieldGoal"===this.state||"gettingHit"===this.state)&&(this.blendTime=0,this.setState("idle"),this.entity.animation.loop=!0)},RefereeAnimationBlending.prototype.setState=function(t){var i=RefereeAnimationBlending.states;this.state=t,this.entity.animation.play(i[t].animation,this.blendTime)},RefereeAnimationBlending.prototype.gettingHit=function(t){this.entity===t&&(this.entity.animation.loop=!1,this.setState("gettingHit"))},RefereeAnimationBlending.prototype.fieldGoal=function(){this.entity.animation.loop=!1,this.blendTime=.3,this.setState("fieldGoal")};var NetAnimationBlending=pc.createScript("netAnimationBlending");NetAnimationBlending.states={idle:{animation:"netIdle.glb"},gettingHit:{animation:"netHit.glb"}},NetAnimationBlending.prototype.initialize=function(){this.blendTime=.2,this.setState("idle"),this.app.on("netCollision",this.gettingHit,this)},NetAnimationBlending.prototype.update=function(t){this.entity.animation.currentTime+.05>=this.entity.animation.duration&&"gettingHit"===this.state&&(this.blendTime=0,this.setState("idle"),this.entity.animation.loop=!0)},NetAnimationBlending.prototype.setState=function(t){var i=NetAnimationBlending.states;this.state=t,this.entity.animation.play(i[t].animation,this.blendTime)},NetAnimationBlending.prototype.gettingHit=function(){this.entity.animation.loop=!1,this.blendTime=0,this.setState("gettingHit")};var RenderCameraToElement=pc.createScript("renderCameraToElement");RenderCameraToElement.attributes.add("elementTags",{type:"string",array:!0,description:"Render to elements that have these tags"}),RenderCameraToElement.attributes.add("renderResolution",{type:"vec2",description:"Resolution to render at"}),RenderCameraToElement.attributes.add("renderOnce",{type:"boolean",description:"Renders the first frame only"}),RenderCameraToElement.prototype.initialize=function(){this.createNewRenderTexture(),this.renderOnceFrameCount=0,this.on("destroy",(function(){this.assignTextureToElements(null),this.renderTarget.destroy(),this.texture.destroy()}),this)},RenderCameraToElement.prototype.update=function(e){this.renderOnce&&(this.renderOnceFrameCount+=1,this.renderOnceFrameCount>4&&(this.entity.enabled=!1))},RenderCameraToElement.prototype.createNewRenderTexture=function(){var e=this.app.graphicsDevice;if(this.texture&&this.renderTarget){var t=this.renderTarget,r=this.texture;this.renderTarget=null,this.texture=null,t.destroy(),r.destroy()}var n=new pc.Texture(e,{width:this.renderResolution.x,height:this.renderResolution.y,format:pc.PIXELFORMAT_R8_G8_B8_A8,autoMipmap:!0});n.minFilter=pc.FILTER_LINEAR_MIPMAP_NEAREST,n.magFilter=pc.FILTER_LINEAR_MIPMAP_NEAREST;var a=new pc.RenderTarget(e,n,{depth:!0,flipY:!0,samples:2});this.entity.camera.renderTarget=a,this.texture=n,this.renderTarget=a,this.assignTextureToElements(this.texture)},RenderCameraToElement.prototype.assignTextureToElements=function(e){for(var t,r=0;r<this.elementTags.length;++r){t=this.app.root.findByTag(this.elementTags[r]);for(var n=0;n<t.length;++n)t[n].element.texture=e}};var InGameUi=pc.createScript("inGameUi");InGameUi.prototype.initialize=function(){this.windValue=0,this.livesValue=void 0,this.windArrow=this.app.root.findByTag("windArrow")[0],this.windSpeed=this.entity.findByTag("windValue")[0],this.scoreValue=this.entity.findByTag("scoreValue")[0],this.lifeParent=this.entity.findByTag("lives")[0],this.arrowTween=void 0,this.app.on("updateInGameUI",this.updateInGameUI,this)},InGameUi.prototype.updateInGameUI=function(t,e){if(this.windValue!=t){let e=90+this.getRandomInt(-25,45);t>0?e=-e:0===t&&(e=180),this.windArrow.tween(this.windArrow.getLocalEulerAngles()).rotate(new pc.Vec3(180,e,180),2,pc.BackOut).on("update",(function(){}),this).start(),this.windSpeed.element.text=0!=t?Math.abs(t).toString():"0"}if(this.livesValue!=e){let t={value:1},i=this;null!=this.lifeParent.children[e]&&this.entity.tween(t).to({value:0},.3,pc.QuadraticInOut).on("update",(function(){i.lifeParent.children[e].element.opacity=t.value}),this).start()}this.windValue=t,this.livesValue=e},InGameUi.prototype.getRandomInt=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)};var CameraShake=pc.createScript("cameraShake");CameraShake.attributes.add("shakeInterval",{type:"number",default:.1,title:"Camera Shake Interval"}),CameraShake.attributes.add("maxShakeDistance",{type:"number",default:.1,title:"Max Shake Distance"}),CameraShake.attributes.add("duration",{type:"number",default:1,title:"Duration"}),CameraShake.prototype.initialize=function(){this.time=this.duration,this.timeSinceLastShake=0,this.tweenBack=void 0,this.hasTweenedBack=!0,this.app.on("cameraShake",this.onStartShake,this)},CameraShake.prototype.update=function(t){if(this.time+=t,this.time<this.duration){this.timeSinceLastShake+=t;let r=this.entity.getPosition().clone();if(this.timeSinceLastShake>=this.shakeInterval){var e=1-pc.math.clamp(this.time/this.duration,0,1),a=2*Math.PI*pc.math.random(0,1),i=pc.math.random(0,this.maxShakeDistance)*e+pc.math.random(0,this.maxShakeDistance)*e,h=i>1?2-i:i,s=h*Math.cos(a),n=h*Math.sin(a);this.entity.setPosition(r.x+s,r.y+n,r.z),this.timeSinceLastShake-=this.shakeInterval}}else this.hasTweenedBack||(this.tweenBack=this.entity.tween(this.entity.getLocalPosition()).to(new pc.Vec3(0,0,0),1,pc.QuadraticOut).start(),this.hasTweenedBack=!0)},CameraShake.prototype.onStartShake=function(){this.time=0,this.hasTweenedBack=!1};var Trail=pc.createScript("trail");Trail.attributes.add("color",{type:"rgb",title:"color"}),Trail.attributes.add("radius",{type:"number",title:"radius",default:.5}),Trail.attributes.add("lifetime",{type:"number",title:"lifetime",default:1.2}),Trail.attributes.add("trailfadeness",{type:"number",title:"trailfadeness",default:2,min:1,max:4}),Trail.attributes.add("opacityFactor",{type:"number",title:"opacityFactor",default:.8,min:.1,max:1}),Trail.v1=new pc.Vec3,Trail.q1=new pc.Quat,Trail.m1=new pc.Mat4,Trail.prototype.initialize=function(){let e=this;this.MAX_VERTICES=1800,this.VERTEX_SIZE=4,this.timer=0,this.node=null,this.vertices=[],this.vertexData=new Float32Array(this.MAX_VERTICES*this.VERTEX_SIZE),this.model=null,this.ballRoot=this.entity.parent.parent.parent,this.app.on("setTrailOn",(function(){this.app.tween({}).to({},.1,pc.Linear).on("complete",(function(){e.material.setParameter("visible",!0)}),this).start()}),this),this.app.on("setTrailOff",(function(){e.material.setParameter("visible",!1)}),this);var t={attributes:{poslist:pc.SEMANTIC_POSITION},vshader:["attribute vec4 poslist;","","uniform mat4 matrix_viewProjection;","uniform float trail_time;","","varying float vAge;","","void main(void)","{","   vAge = trail_time - poslist.w;","   gl_Position = matrix_viewProjection * vec4(poslist.xyz, 1.0);","}"].join("\n"),fshader:["precision mediump float;","","varying float vAge;","","uniform float trail_lifetime;","uniform bool visible;","uniform float rValue;","uniform float gValue;","uniform float bValue;","void main(void)","{","   vec4 color = vec4(0);","   if(visible) color = vec4( rValue, gValue, bValue, (1.0 - (vAge / trail_lifetime)) *"+this.opacityFactor+");","   gl_FragColor = color;","}"].join("\n")},i=new pc.Shader(this.app.graphicsDevice,t),a=this.material=new pc.scene.Material;a.shader=i,a.setParameter("trail_time",0),a.setParameter("trail_lifetime",this.lifetime),a.setParameter("visible",!1),a.setParameter("rValue","1"),a.setParameter("gValue","1"),a.setParameter("bValue","1"),a.cull=pc.CULLFACE_NONE,a.blendType=pc.BLEND_ADDITIVE,a.blendSrc=pc.BLENDMODE_SRC_ALPHA,a.blendDst=pc.BLENDMODE_ONE_MINUS_SRC_ALPHA,a.blendEquation=pc.BLENDEQUATION_ADD,a.depthWrite=!1;var r=new pc.VertexFormat(this.app.graphicsDevice,[{semantic:pc.SEMANTIC_POSITION,components:4,type:pc.TYPE_FLOAT32}]),s=new pc.VertexBuffer(this.app.graphicsDevice,r,this.MAX_VERTICES,pc.BUFFER_DYNAMIC),o=new pc.scene.Mesh;o.vertexBuffer=s,o.indexBuffer[0]=null,o.primitive[0].type=pc.PRIMITIVE_TRISTRIP,o.primitive[0].base=0,o.primitive[0].count=0,o.primitive[0].indexed=!1;var l=new pc.GraphNode,c=new pc.MeshInstance(l,o,a);c.layer=pc.LAYER_WORLD,c.cull=!1,c.updateKey(),this.model=new pc.Model,this.model.graph=l,this.model.meshInstances.push(c),this.setNode(this.entity),this.vb=s,this.isNoneState=!1,this.cachedVec=new pc.Vec3(0,0,0),this.camera=this.app.root.findByName("Camera")},Trail.prototype.postUpdate=function(e){if(this.timer+=e,this.model.meshInstances[0].material.setParameter("trail_time",this.timer),this.clearOld(),this.spawn(this.radius),this.vertices.length>1){this.copyToArrayBuffer(),this.updateNumActive();var t=this.model.meshInstances[0].mesh.vertexBuffer;new Float32Array(t.lock()).set(this.vertexData),t.unlock(),this.app.scene.containsModel(this.model)||this.app.scene.addModel(this.model)}else this.app.scene.containsModel(this.model)&&this.app.scene.removeModel(this.model)},Trail.prototype.SetOn=function(){this.reset(),this.material.setParameter("visible",!0)},Trail.prototype.SetOff=function(){this.app.scene.removeModel(this.model),this.material.setParameter("visible",!1)},Trail.prototype.visible=function(){this.material.setParameter("visible",!0)},Trail.prototype.invisible=function(){this.material.setParameter("visible",!1)},Trail.prototype.changeColor=function(e,t,i){this.material.setParameter("rValue",e),this.material.setParameter("gValue",t),this.material.setParameter("bValue",i)},Trail.prototype.reset=function(){this.oldPos=null,this.timer=0,this.vertices=[]},Trail.prototype.spawn=function(e){var t=this.node.getPosition(),i=this.camera.getPosition(),a=this.node.getPosition(),r=Trail.v1,s=Trail.m1,o=Trail.q1;r.copy(i).sub(a).normalize(),setMat4Forward(s,r,pc.Vec3.UP),o.setFromMat4(s);var l=[];if(this.oldPos){for(var c=this.oldPos.clone().sub(t),n=0;n<9;n++){var h=Math.PI/4*n;this.cachedVec.set(e*Math.cos(h),e*Math.sin(h),0),o.transformVector(this.cachedVec,this.cachedVec),this.cachedVec.add(t),l=l.concat([this.cachedVec.x,this.cachedVec.y,this.cachedVec.z,this.cachedVec.x+c.x,this.cachedVec.y+c.y,this.cachedVec.z+c.z])}this.oldPos=t.clone(),this.vertices.unshift({spawnTime:this.timer,vertexPair:l})}else this.oldPos=t.clone()},Trail.prototype.clearOld=function(){for(var e=this.vertices.length-1;e>=0;e--){var t=this.vertices[e];if(!(this.timer-t.spawnTime>=this.lifetime))return;this.vertices.pop()}},Trail.prototype.copyToArrayBuffer=function(){for(var e=0;e<this.vertices.length;e++)for(var t=this.vertices[e],i=0;i<18;i++)this.vertexData[72*e+0+4*i]=t.vertexPair[0+3*i],this.vertexData[72*e+1+4*i]=t.vertexPair[1+3*i],this.vertexData[72*e+2+4*i]=t.vertexPair[2+3*i],this.vertexData[72*e+3+4*i]=t.spawnTime},Trail.prototype.updateNumActive=function(){this.model.meshInstances[0].mesh.primitive[0].count=this.trailfadeness*this.vertices.length*9},Trail.prototype.setNode=function(e){this.node=e},Trail.prototype.Finit=function(){this.vb.destroy()},Trail.prototype.clear=function(){this.reset(),this.app.scene.containsModel(this.model)&&this.app.scene.removeModel(this.model)};var setMat4Forward=function(){var e,t,i;return e=new pc.Vec3,t=new pc.Vec3,i=new pc.Vec3,function(a,r,s){i.copy(r).scale(-1),t.copy(s).normalize(),e.cross(t,i).normalize(),t.cross(i,e);var o=a.data;return o[0]=e.x,o[1]=e.y,o[2]=e.z,o[3]=0,o[4]=t.x,o[5]=t.y,o[6]=t.z,o[7]=0,o[8]=i.x,o[9]=i.y,o[10]=i.z,o[11]=0,o[15]=1,a}}();var ReadyToKickAnim=pc.createScript("readyTokickAnim");ReadyToKickAnim.attributes.add("animSpeed",{type:"number",default:.8,description:"time Between Transitions for camera, and wind etc."}),ReadyToKickAnim.prototype.initialize=function(){this.offScreenPos=this.entity.getLocalPosition().clone(),this.offScreenRot=this.entity.getLocalEulerAngles().clone(),this.onScreenPos=new pc.Vec3(0,0,0),this.onScreenRot=new pc.Vec3(0,0,0),this.rotTween=void 0,this.posTween=void 0,this.app.on("playReadyToKickAnim",this.playReadyAnimation,this),this.app.on("setBallOffScreen",this.setBallOffScreen,this)},ReadyToKickAnim.prototype.playReadyAnimation=function(){this.setBallOffScreen(),this.entity.tween(this.entity.getLocalEulerAngles()).rotate(this.onScreenRot,this.animSpeed,pc.ElasticOut).start(),this.entity.tween(this.entity.getLocalPosition()).to(this.onScreenPos,this.animSpeed,pc.ElasticOut).start()},ReadyToKickAnim.prototype.setBallOffScreen=function(){this.entity.setLocalEulerAngles(this.offScreenRot),this.entity.setLocalPosition(this.offScreenPos)};var GameData=pc.createScript("gameData");GameData.attributes.add("transitionSpeed",{type:"number",default:1.2,description:"time Between Transitions for camera, and wind etc."}),GameData.prototype.initialize=function(){this.score=0,this.lives=4,this.wind=0,this.hasScoredThisKick=!1,this.app.on("resetGameData",this.reset,this),this.app.on("ballHitGround",this.onBallHitGround,this),this.app.on("successfulFieldGoal",this.onSuccesfulFieldGoal,this),this.app.on("launchFootball",this.onBallLaunch,this),this.app.on("startGameIntro",this.startGameIntro,this),this.app.on("enableGameplay",this.startGame,this),this.app.fire("disableFlick")},GameData.prototype.onSuccesfulFieldGoal=function(){this.score++,this.app.fire("addPoints",1),this.hasScoredThisKick=!0,this.score<=3&&this.startTransition(),this.updateWind(),this.updateMaxBallPower(),this.updateInGameUI()},GameData.prototype.onUnsuccesfulFieldGoal=function(){this.lives--,this.lives<=0&&this.endGame()},GameData.prototype.onBallHitGround=function(){this.app.fire("setBallOffScreen"),this.hasScoredThisKick||this.onUnsuccesfulFieldGoal(),this.lives>0&&this.app.fire("playReadyToKickAnim"),this.app.fire("setTrailOff"),this.updateInGameUI(),this.hasScoredThisKick=!1},GameData.prototype.onBallLaunch=function(){this.app.fire("cameraShake"),this.app.fire("setTrailOn")},GameData.prototype.startGameIntro=function(){this.app.fire("transitionCameraToNextKickPosition")},GameData.prototype.startTransition=function(){this.app.fire("transitionCameraToNextKickPosition"),this.app.fire("disableFlick"),this.app.tween({}).to({},this.transitionSpeed,pc.Linear).on("complete",this.endTransition,this).start()},GameData.prototype.startGame=function(){this.app.fire("enableFlick"),this.app.fire("playReadyToKickAnim")},GameData.prototype.endGame=function(){this.app.fire("disableFlick"),this.app.fire("stopGame")},GameData.prototype.endTransition=function(){this.app.fire("enableFlick")},GameData.prototype.reset=function(){this.score=0,this.lives=4,this.resetWind(),this.updateMaxBallPower(),this.app.fire("updateInGameUI",this.wind,this.lives)},GameData.prototype.updateWind=function(){0===this.getRandomInt(0,3)&&0!=this.wind?this.wind=0:this.wind=this.getRandomInt(5,25),Math.random()<.5&&(this.wind=-1*this.wind),this.app.fire("updateWind",this.wind)},GameData.prototype.resetWind=function(){this.wind=0,this.app.fire("updateWind",this.wind)},GameData.prototype.updateMaxBallPower=function(){let t=50;1===this.score?t=60:2===this.score?t=70:3===this.score?t=80:this.score>3&&(t=96),this.app.fire("updateMaxPower",t)},GameData.prototype.updateInGameUI=function(){this.app.fire("updateInGameUI",this.wind,this.lives)},GameData.prototype.getRandomInt=function(t,i){return t=Math.ceil(t),i=Math.floor(i),Math.floor(Math.random()*(i-t+1)+t)};var CameraAnim=pc.createScript("cameraAnim");CameraAnim.attributes.add("transitionSpeed",{type:"number",description:"Should not be greater than 3",default:1.5}),CameraAnim.prototype.initialize=function(){this.cameraPosEntities=this.app.root.findByTag("cameraPosEntity")[0],this.cameraPosIndex=-1,this.hasStartedGame=!1,this.movementTween=void 0,this.rotationalTween=void 0,this.entity.setPosition(this.cameraPosEntities.findByTag("startPos")[0].getPosition()),this.entity.setEulerAngles(this.cameraPosEntities.findByTag("startPos")[0].getEulerAngles()),this.app.on("transitionCameraToNextKickPosition",this.tweenToNextPosition,this),this.app.on("resetCamera",this.resetCameraToFirstKickPos,this)},CameraAnim.prototype.tweenToNextPosition=function(){this.cameraPosIndex++;let t=this.cameraPosEntities.findByTag("campos"+this.cameraPosIndex.toString())[0];null!=t&&(this.movementTween=this.entity.tween(this.entity.getLocalPosition()).to(t.getPosition(),this.transitionSpeed,pc.QuadraticInOut).start(),this.rotationalTween=this.entity.tween(this.entity.getLocalEulerAngles()).rotate(t.getEulerAngles(),this.transitionSpeed,pc.QuadraticInOut).start())},CameraAnim.prototype.resetCameraToFirstKickPos=function(){this.hasStartedGame?(this.cameraPosIndex=0,this.entity.setPosition(this.cameraPosEntities.findByTag("campos0")[0].getPosition()),this.entity.setEulerAngles(this.cameraPosEntities.findByTag("campos0")[0].getEulerAngles())):this.hasStartedGame=!0};var UiSceneManager=pc.createScript("uiSceneManager");UiSceneManager.attributes.add("startScene",{type:"entity"}),UiSceneManager.attributes.add("instructionsScene",{type:"entity"}),UiSceneManager.attributes.add("inGameScene",{type:"entity"}),UiSceneManager.attributes.add("endScene",{type:"entity"}),UiSceneManager.attributes.add("endBGScene",{type:"entity"}),UiSceneManager.attributes.add("endBGElement",{type:"entity"}),UiSceneManager.attributes.add("transitionSpeed",{type:"number"}),UiSceneManager.prototype.initialize=function(){let e=this;this.scenes=[this.startScene,this.instructionsScene,this.endScene,this.inGameScene,this.leaderboardScene],this.currentScene=this.startScene,this.isEndVisible=!0,this.endPanRect=new pc.Vec4(0,0,2.5,4),this.scenes.forEach((function(t){this.currentScene!=t&&e.switchSceneState(t,"off")})),this.handleOpacityAndButtons(this.currentScene,"on"),this.opacityTween=void 0,this.app.on("changeScene",(function(t){e.changeScene(t)}),this)},UiSceneManager.prototype.changeScene=function(e){this.handleOpacityAndButtons(this.currentScene,"off"),this.currentScene!==this.inGameScene||"end"!==e&&"leadGen"!==e?this.currentScene===this.endScene&&"game"===e&&(this.isEndVisible=!1,this.handleOpacityAndButtons(this.endBGScene,"off")):(this.isEndVisible=!0,this.handleOpacityAndButtons(this.endBGScene,"on")),"start"===e&&(this.handleOpacityAndButtons(this.startScene,"on"),this.currentScene=this.startScene),"instructions"===e?(this.handleOpacityAndButtons(this.instructionsScene,"on"),this.currentScene=this.instructionsScene):"game"===e?(this.handleOpacityAndButtons(this.inGameScene,"on"),this.currentScene=this.inGameScene):"end"===e&&(this.handleOpacityAndButtons(this.endScene,"on"),this.currentScene=this.endScene)},UiSceneManager.prototype.handleOpacityAndButtons=function(e,t){let n=e.findComponents("element"),i=this,c={value:n[0].opacity},s=1;"off"===t?(s=0,this.switchButtons(e,"off")):"on"===t&&(n.forEach((function(e){1!=e.mask&&(e.opacity=0)})),e.setPosition(0,0,0)),this.opacityTween=e.tween(c).to({value:s},this.transitionSpeed,pc.QuadraticInOut).delay(0).on("update",(function(){n.forEach((function(e){1!=e.mask&&(e.opacity=c.value)}))})).on("complete",(function(){"off"===t?e.setPosition(-1e3,0,0):i.switchButtons(e,"on")})).start()},UiSceneManager.prototype.switchSceneState=function(e,t){this.switchOpacity(e,t),this.switchButtons(e,t)},UiSceneManager.prototype.switchOpacity=function(e,t){let n=1;"off"===t&&(n=0),e.findComponents("button").forEach((function(e){1!=e.mask&&(e.opacity=n)}))},UiSceneManager.prototype.switchButtons=function(e,t){let n=!0;"off"===t&&(n=!1),e.findComponents("button").forEach((function(e){e.active=n}))},UiSceneManager.prototype.update=function(e){this.isEndVisible&&(this.endPanRect.x-=5e-4,this.endPanRect.y+=5e-4,this.endBGElement.element.rect=this.endPanRect)};var AppManager=pc.createScript("appManager");AppManager.attributes.add("inGameScoreTextEntity",{type:"entity"}),AppManager.attributes.add("endScreenScoreEntity",{type:"entity"}),AppManager.attributes.add("endScreenHiscoreEntity",{type:"entity"}),AppManager.prototype.initialize=function(){this.score=0,this.hiscore=0,this.gameStarted=!0,this.app.on("startButtonPress",this.startGameFromStartButton,this),this.app.on("instructionsButtonPress",this.viewInstructions,this),this.app.on("exitInstructionsButtonPress",this.leaveInstructions,this),this.app.on("endCountdown",this.endCountdown,this),this.app.on("stopGame",this.stopGame,this),this.app.on("endFinishGameTransition",this.endFinishGameTransition,this),this.app.on("resetButtonPress",this.startCountdown,this),this.app.on("prizeButtonPress",this.tryToClaimPrize,this),this.app.on("addPoints",this.addPoints,this)},AppManager.prototype.addPoints=function(t){this.score+=t,this.updateScoreText(this.inGameScoreTextEntity),this.app.fire("checkPrizeNotification",this.score)},AppManager.prototype.setPoints=function(t){this.score=t,this.updateScoreText(this.inGameScoreTextEntity),this.app.fire("checkPrizeNotification",this.score)},AppManager.prototype.updateScoreText=function(t){let e=this.score.toString();t.element.text=e},AppManager.prototype.updateScoreText_formatted=function(t){let e=this.score.toString();e<10?e="0000"+e:e<100?e="000"+e:e<1e3?e="00"+e:e<1e4&&(e="0"+e),t.element.text=e},AppManager.prototype.startGameFromStartButton=function(){this.app.fire("startGameIntro"),this.startCountdown()},AppManager.prototype.tryToClaimPrize=function(){this.app.fire("serveExternalPrize")},AppManager.prototype.startCountdown=function(){this.setPoints(0),this.app.fire("setBallOffScreen"),this.app.fire("resetGameData"),this.app.fire("resetCamera"),this.app.fire("disableGameplay"),this.app.fire("resetOverlays"),this.app.fire("startCountdown"),this.app.fire("changeScene","game")},AppManager.prototype.endCountdown=function(){this.startGame()},AppManager.prototype.startFinishGameTransition=function(){this.gameStarted=!1,this.app.fire("startFinishGameTransition")},AppManager.prototype.endFinishGameTransition=function(){this.score>this.hiscore&&(this.hiscore=this.score,this.updateScoreText_formatted(this.endScreenHiscoreEntity)),this.updateScoreText_formatted(this.endScreenScoreEntity),this.app.fire("changeScene","end")},AppManager.prototype.viewInstructions=function(){this.app.fire("changeScene","instructions")},AppManager.prototype.leaveInstructions=function(){this.app.fire("changeScene","start")},AppManager.prototype.startGame=function(){this.app.fire("enableGameplay")},AppManager.prototype.stopGame=function(){this.app.fire("startFinishGameTransition"),this.app.fire("disableGameplay")};var InputManager=pc.createScript("inputManager");InputManager.attributes.add("startBtn",{type:"entity"}),InputManager.attributes.add("instructionsBtn",{type:"entity"}),InputManager.attributes.add("exitInstructionsBtn",{type:"entity"}),InputManager.attributes.add("resetBtn0",{type:"entity"}),InputManager.attributes.add("resetBtn1",{type:"entity"}),InputManager.attributes.add("externalPrizeBtn0",{type:"entity"}),InputManager.attributes.add("externalPrizeBtn1",{type:"entity"}),InputManager.prototype.initialize=function(){let t=this;this.startBtn.button.on("click",(function(){t.app.fire("startButtonPress")}),this),this.instructionsBtn.button.on("click",(function(){t.app.fire("instructionsButtonPress")}),this),this.exitInstructionsBtn.button.on("click",(function(){t.app.fire("exitInstructionsButtonPress")}),this),this.resetBtn0.button.on("click",(function(){t.app.fire("resetButtonPress")}),this),this.resetBtn1.button.on("click",(function(){t.app.fire("resetButtonPress")}),this),this.externalPrizeBtn0.button.on("click",(function(){t.app.fire("prizeButtonPress")}),this),this.externalPrizeBtn1.button.on("click",(function(){t.app.fire("prizeButtonPress")}),this)};var FinishGameTransitionManager=pc.createScript("finishGameTransitionManager");FinishGameTransitionManager.attributes.add("timesUp",{type:"entity"}),FinishGameTransitionManager.prototype.initialize=function(){this.opacityObject={value:0},this.opacityTween=void 0,this.app.on("startFinishGameTransition",this.startFinishGameTransition,this),this.app.on("resetOverlays",this.resetFinishGameTransition,this)},FinishGameTransitionManager.prototype.startFinishGameTransition=function(t){let i=this;for(let t=0;t<this.entity.children.length;t++)this.entity.children[t].element.opacity=0,this.entity.children[t].enabled=!0;this.opacityTween=this.entity.tween(this.opacityObject).to({value:1},.15,pc.QuadraticInOut).delay(0).on("update",(function(){for(let t=0;t<i.entity.children.length;t++)i.entity.children[t].element.opacity=i.opacityObject.value})).on("complete",(function(){this.app.tween({}).to({},1.5,pc.Linear).delay(0).on("complete",(function(){this.app.fire("endFinishGameTransition")}),this).start()}),this).start()},FinishGameTransitionManager.prototype.resetFinishGameTransition=function(t){for(let t=0;t<this.entity.children.length;t++)this.entity.children[t].element.opacity=0,this.entity.children[t].enabled=!0;this.opacityObject={value:0}};var CountdownManager=pc.createScript("countdownManager");CountdownManager.attributes.add("one",{type:"entity"}),CountdownManager.attributes.add("two",{type:"entity"}),CountdownManager.attributes.add("three",{type:"entity"}),CountdownManager.attributes.add("go",{type:"entity"}),CountdownManager.prototype.initialize=function(){this.opacityObject={value:0},this.opacityTween=void 0,this.app.on("startCountdown",this.startCountdown,this),this.app.on("resetOverlays",this.resetCountdown,this)},CountdownManager.prototype.startCountdown=function(){let t=this;for(let t=0;t<this.entity.children.length;t++)this.entity.children[t].element.opacity=1,this.entity.children[t].enabled=!1;this.three.enabled=!0,this.three.element.opacity=0,this.opacityTween=this.entity.tween(this.opacityObject).to({value:1},.3,pc.QuadraticInOut).on("update",(function(){t.three.element.opacity=t.opacityObject.value})).on("complete",(function(){this.app.tween({}).to({},.9,pc.Linear).on("complete",(function(){this.three.enabled=!1,this.two.enabled=!0,this.app.tween({}).to({},1.2,pc.Linear).on("complete",(function(){this.two.enabled=!1,this.one.enabled=!0,this.app.tween({}).to({},1.2,pc.Linear).on("complete",(function(){this.one.enabled=!1,this.app.fire("endCountdown"),this.go.enabled=!0,this.opacityTween=this.entity.tween(this.opacityObject).to({value:0},.3,pc.QuadraticInOut).delay(.5).on("update",(function(){t.go.element.opacity=t.opacityObject.value})).start()}),this).start()}),this).start()}),this).start()}),this).start()},CountdownManager.prototype.resetCountdown=function(){for(let t=0;t<this.entity.children.length;t++)this.entity.children[t].element.opacity=1,this.entity.children[t].enabled=!1};var ExternalPrize=pc.createScript("externalPrize");ExternalPrize.attributes.add("shouldServePrize",{type:"boolean",default:!0}),ExternalPrize.attributes.add("shouldDropDown",{type:"boolean",default:!0}),ExternalPrize.attributes.add("externalPrizeURL",{type:"string"}),ExternalPrize.attributes.add("prizeThreshold",{type:"number",default:10}),ExternalPrize.attributes.add("claimPrizeGrp",{type:"entity"}),ExternalPrize.attributes.add("noClaimPrizeGrp",{type:"entity"}),ExternalPrize.attributes.add("prizeOverlay",{type:"entity"}),ExternalPrize.prototype.initialize=function(){let e=this;this.onScreenOverlayPos=this.prizeOverlay.getLocalPosition().clone(),this.offScreenOverlayPos=new pc.Vec3(this.onScreenOverlayPos.x-600,this.onScreenOverlayPos.y,0),this.prizeOverlay.setLocalPosition(this.offScreenOverlayPos),this.claimPrizeGrp.enabled=!1,this.noClaimPrizeGrp.enabled=!0,this.hasPrizePopped=!1,this.willDropDown=this.shouldDropDown,this.shouldServePrize?(this.app.on("preventDropDownCoupon",(function(){this.willDropDown=!1}),this),this.app.on("serveExternalPrize",(function(){window.top.location.href=e.externalPrizeURL}),this),this.app.on("checkPrizeNotification",(function(t){t>=e.prizeThreshold&&!e.hasPrizePopped&&(e.hasPrizePopped=!0,this.willDropDown&&e.prizeNotifAnimation(),e.enableEndgamePrizeButton())}),this),this.app.on("resetPrizeNotification",(function(){e.hasPrizePopped=!1}),this)):this.entity.script.destroy("externalPrize")},ExternalPrize.prototype.enableEndgamePrizeButton=function(){this.claimPrizeGrp.enabled=!0,this.noClaimPrizeGrp.enabled=!1},ExternalPrize.prototype.prizeNotifAnimation=function(){var e=this;this.tween=this.prizeOverlay.tween(this.prizeOverlay.getLocalPosition()).to(this.onScreenOverlayPos,.8,pc.BackOut).delay(.5).loop(!1).yoyo(!1).on("complete",(function(){e.tween=e.prizeOverlay.tween(this.prizeOverlay.getLocalPosition()).to(e.offScreenOverlayPos,.3,pc.QuadraticIn).delay(3).loop(!1).yoyo(!1).start()}),this).start()};var RenderQuality=pc.createScript("renderQuality");RenderQuality.prototype.initialize=function(){let i=pc.Application.getApplication().graphicsDevice;!pc.platform.ios&&pc.platform.mobile?(i.maxPixelRatio=1,console.log("not ios")):i.maxPixelRatio=window.devicePixelRatio},RenderQuality.prototype.update=function(i){};